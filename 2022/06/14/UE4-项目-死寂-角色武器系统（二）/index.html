<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="子弹击中设置，击中特效知识点发射物移动组件此组件可给物体添加抛射线计算，使其有初始速度和弹道 事件命中当蓝图实例产生了碰撞之后，就会产生信息，此节点可将信息输出 贴花在某位置产生贴花的时候，就可以覆盖原本位置的材质和图案（弹孔效果） 当贴花材质完全垂直于原物体的表面的时候，才可以完整的显示出来（没有拉伸） 在位置处生成贴画字面意思 物理材质通过物理材质可以实现任务走在不同材质的地面上产生不同的声音">
<meta property="og:type" content="article">
<meta property="og:title" content="UE4-项目-死寂-角色武器系统（二）">
<meta property="og:url" content="http://example.com/2022/06/14/UE4-%E9%A1%B9%E7%9B%AE-%E6%AD%BB%E5%AF%82-%E8%A7%92%E8%89%B2%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BA%8C%EF%BC%89/index.html">
<meta property="og:site_name" content="Williny&#39;home">
<meta property="og:description" content="子弹击中设置，击中特效知识点发射物移动组件此组件可给物体添加抛射线计算，使其有初始速度和弹道 事件命中当蓝图实例产生了碰撞之后，就会产生信息，此节点可将信息输出 贴花在某位置产生贴花的时候，就可以覆盖原本位置的材质和图案（弹孔效果） 当贴花材质完全垂直于原物体的表面的时候，才可以完整的显示出来（没有拉伸） 在位置处生成贴画字面意思 物理材质通过物理材质可以实现任务走在不同材质的地面上产生不同的声音">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-06-14T08:20:40.000Z">
<meta property="article:modified_time" content="2022-06-18T03:41:04.581Z">
<meta property="article:author" content="williny">
<meta property="article:tag" content="项目">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2022/06/14/UE4-%E9%A1%B9%E7%9B%AE-%E6%AD%BB%E5%AF%82-%E8%A7%92%E8%89%B2%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BA%8C%EF%BC%89/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2022/06/14/UE4-%E9%A1%B9%E7%9B%AE-%E6%AD%BB%E5%AF%82-%E8%A7%92%E8%89%B2%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BA%8C%EF%BC%89/","path":"2022/06/14/UE4-项目-死寂-角色武器系统（二）/","title":"UE4-项目-死寂-角色武器系统（二）"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>UE4-项目-死寂-角色武器系统（二） | Williny'home</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Williny'home</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%87%BB%E4%B8%AD%E7%89%B9%E6%95%88"><span class="nav-number">1.</span> <span class="nav-text">子弹击中设置，击中特效</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="nav-number">1.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E5%B0%84%E7%89%A9%E7%A7%BB%E5%8A%A8%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.1.</span> <span class="nav-text">发射物移动组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E5%91%BD%E4%B8%AD"><span class="nav-number">1.1.2.</span> <span class="nav-text">事件命中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%B4%E8%8A%B1"><span class="nav-number">1.1.3.</span> <span class="nav-text">贴花</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E4%BD%8D%E7%BD%AE%E5%A4%84%E7%94%9F%E6%88%90%E8%B4%B4%E7%94%BB"><span class="nav-number">1.1.4.</span> <span class="nav-text">在位置处生成贴画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E6%9D%90%E8%B4%A8"><span class="nav-number">1.1.5.</span> <span class="nav-text">物理材质</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E8%A1%A8%E9%9D%A2%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.1.6.</span> <span class="nav-text">物理表面类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%B8%AD%E7%BB%93%E6%9E%9C"><span class="nav-number">1.1.7.</span> <span class="nav-text">命中结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E5%91%BD%E4%B8%AD%E7%BB%93%E6%9E%9C"><span class="nav-number">1.1.8.</span> <span class="nav-text">中断命中结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%B1%E9%80%9A%E9%81%93%E6%A3%80%E6%B5%8B%E7%90%83%E4%BD%93"><span class="nav-number">1.1.9.</span> <span class="nav-text">由通道检测球体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%A1%A8%E9%9D%A2%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.1.10.</span> <span class="nav-text">获取表面类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E6%9D%90%E8%B4%A8-1"><span class="nav-number">1.1.11.</span> <span class="nav-text">物理材质</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E4%BD%8D%E7%BD%AE%E5%A4%84%E7%94%9F%E6%88%90%E5%8F%91%E5%B0%84%E5%99%A8"><span class="nav-number">1.1.12.</span> <span class="nav-text">在位置处生成发射器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E6%A8%A1%E6%8B%9F%E7%89%A9%E7%90%86%E7%8E%B0%E8%B1%A1"><span class="nav-number">1.1.13.</span> <span class="nav-text">为模拟物理现象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%86%B2%E9%87%8F"><span class="nav-number">1.1.14.</span> <span class="nav-text">添加冲量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%92%AD%E6%94%BE%E4%BD%8D%E7%BD%AE%E5%A4%84%E7%9A%84%E9%9F%B3%E6%95%88"><span class="nav-number">1.1.15.</span> <span class="nav-text">播放位置处的音效</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF"><span class="nav-number">1.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9"><span class="nav-number">2.</span> <span class="nav-text">发射子弹</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-1"><span class="nav-number">2.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%8F%92%E6%A7%BD%E5%8F%98%E6%8D%A2"><span class="nav-number">2.1.1.</span> <span class="nav-text">获取插槽变换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%AD%E5%A4%B4%E7%BB%84%E4%BB%B6"><span class="nav-number">2.1.2.</span> <span class="nav-text">箭头组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A5%E4%BA%8B%E4%BB%B6%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="nav-number">2.1.3.</span> <span class="nav-text">以事件设置定时器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A5%E5%8F%A5%E6%9F%84%E6%B8%85%E9%99%A4%E5%AE%9A%E6%97%B6%E5%99%A8%E5%B9%B6%E4%BD%BF%E4%B9%8B%E6%97%A0%E6%95%88"><span class="nav-number">2.1.4.</span> <span class="nav-text">以句柄清除定时器并使之无效</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-1"><span class="nav-number">2.2.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%B9%E5%A3%B3%E8%90%BD%E5%9C%B0%E9%9F%B3%E6%95%88"><span class="nav-number">3.</span> <span class="nav-text">弹壳落地音效</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-2"><span class="nav-number">3.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9F%B3%E6%95%88Cue"><span class="nav-number">3.1.1.</span> <span class="nav-text">音效Cue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA"><span class="nav-number">3.1.2.</span> <span class="nav-text">随机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E5%88%B6%E5%99%A8"><span class="nav-number">3.1.3.</span> <span class="nav-text">调制器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%B0%E5%87%8F"><span class="nav-number">3.1.4.</span> <span class="nav-text">衰减</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E9%85%8DOn-Particle-Collide"><span class="nav-number">3.1.5.</span> <span class="nav-text">分配On Particle Collide</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Do-N"><span class="nav-number">3.1.6.</span> <span class="nav-text">Do N</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-2"><span class="nav-number">3.2.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E8%A3%85%E5%A4%87%E6%AD%A6%E5%99%A8%E9%9F%B3%E6%95%88"><span class="nav-number">4.</span> <span class="nav-text">角色装备武器音效</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-3"><span class="nav-number">4.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%92%AD%E6%94%BE%E9%9F%B3%E6%95%882D"><span class="nav-number">4.1.1.</span> <span class="nav-text">播放音效2D</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-3"><span class="nav-number">4.2.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E8%B7%B3%E8%B7%83%E9%9F%B3%E6%95%88"><span class="nav-number">5.</span> <span class="nav-text">角色跳跃音效</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-4"><span class="nav-number">5.1.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A6%E5%99%A8%E5%85%A8%E8%87%AA%E5%8A%A8%E5%92%8C%E5%8D%8A%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2"><span class="nav-number">6.</span> <span class="nav-text">武器全自动和半自动切换</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-5"><span class="nav-number">6.1.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A6%E5%99%A8%E5%90%8E%E5%9D%90%E5%8A%9B%EF%BC%88%E6%9E%AA%E5%8F%A3%E5%90%91%E4%B8%8A%E5%81%8F%E7%A7%BB%EF%BC%89"><span class="nav-number">7.</span> <span class="nav-text">武器后坐力（枪口向上偏移）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-4"><span class="nav-number">7.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8C%83%E5%9B%B4%E5%86%85%E9%9A%8F%E6%9C%BA%E6%B5%AE%E7%82%B9"><span class="nav-number">7.1.1.</span> <span class="nav-text">范围内随机浮点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-6"><span class="nav-number">7.2.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E6%8D%A2%E5%BC%B9%E5%8A%A8%E7%94%BB%E5%8F%8A%E9%9F%B3%E6%95%88"><span class="nav-number">8.</span> <span class="nav-text">角色换弹动画及音效</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-5"><span class="nav-number">8.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Do-Once"><span class="nav-number">8.1.1.</span> <span class="nav-text">Do Once</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%8B%E8%BD%AC%E6%B5%AE%E7%82%B9"><span class="nav-number">8.1.2.</span> <span class="nav-text">旋转浮点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-7"><span class="nav-number">8.2.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%B9%E5%A4%B9%E9%99%84%E5%8A%A0%E5%88%B0%E6%89%8B%E4%B8%8A%E5%8F%8A%E4%B8%A2%E5%BC%83"><span class="nav-number">9.</span> <span class="nav-text">弹夹附加到手上及丢弃</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-6"><span class="nav-number">9.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E7%94%BB%E9%80%9A%E7%9F%A5"><span class="nav-number">9.1.1.</span> <span class="nav-text">动画通知</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8EActor%E5%88%86%E7%A6%BB"><span class="nav-number">9.1.2.</span> <span class="nav-text">从Actor分离</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-8"><span class="nav-number">9.2.</span> <span class="nav-text">思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%92%E8%89%B2%E8%84%9A%E6%AD%A5%E5%A3%B0%E9%9F%B3%E6%95%88"><span class="nav-number">10.</span> <span class="nav-text">角色脚步声音效</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-7"><span class="nav-number">10.1.</span> <span class="nav-text">知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%B1%E9%80%9A%E9%81%93%E6%A3%80%E6%B5%8B%E7%BA%BF%E6%9D%A1"><span class="nav-number">10.1.1.</span> <span class="nav-text">由通道检测线条</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%B7%AF-9"><span class="nav-number">10.2.</span> <span class="nav-text">思路</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="williny"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">williny</p>
  <div class="site-description" itemprop="description">孤独是人生的常态</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">145</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/suchangche" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;suchangche" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:469478061@qq.com" title="E-Mail → mailto:469478061@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/06/14/UE4-%E9%A1%B9%E7%9B%AE-%E6%AD%BB%E5%AF%82-%E8%A7%92%E8%89%B2%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="UE4-项目-死寂-角色武器系统（二） | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE4-项目-死寂-角色武器系统（二）
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-14 16:20:40" itemprop="dateCreated datePublished" datetime="2022-06-14T16:20:40+08:00">2022-06-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-18 11:41:04" itemprop="dateModified" datetime="2022-06-18T11:41:04+08:00">2022-06-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/unreal-engine/" itemprop="url" rel="index"><span itemprop="name">unreal engine</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="子弹击中设置，击中特效"><a href="#子弹击中设置，击中特效" class="headerlink" title="子弹击中设置，击中特效"></a>子弹击中设置，击中特效</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="发射物移动组件"><a href="#发射物移动组件" class="headerlink" title="发射物移动组件"></a>发射物移动组件</h3><p>此组件可给物体添加抛射线计算，使其有初始速度和弹道</p>
<h3 id="事件命中"><a href="#事件命中" class="headerlink" title="事件命中"></a>事件命中</h3><p>当蓝图实例产生了碰撞之后，就会产生信息，此节点可将信息输出</p>
<h3 id="贴花"><a href="#贴花" class="headerlink" title="贴花"></a>贴花</h3><p>在某位置产生贴花的时候，就可以覆盖原本位置的材质和图案（弹孔效果）</p>
<p>当贴花材质完全垂直于原物体的表面的时候，才可以完整的显示出来（没有拉伸）</p>
<h3 id="在位置处生成贴画"><a href="#在位置处生成贴画" class="headerlink" title="在位置处生成贴画"></a>在位置处生成贴画</h3><p>字面意思</p>
<h3 id="物理材质"><a href="#物理材质" class="headerlink" title="物理材质"></a>物理材质</h3><p>通过物理材质可以实现任务走在不同材质的地面上产生不同的声音</p>
<p>可以理解为一个标签，用来区分角色走在的材质表面具体是哪一种材质</p>
<h3 id="物理表面类型"><a href="#物理表面类型" class="headerlink" title="物理表面类型"></a>物理表面类型</h3><p>辅助物理材质来使用，有了类型才能区分物理材质</p>
<p>在项目设置-&gt;物理-&gt;物理表面即可新建和编辑</p>
<h3 id="命中结果"><a href="#命中结果" class="headerlink" title="命中结果"></a>命中结果</h3><p>这是一个数据类型，代表的就是字面意思</p>
<h3 id="中断命中结果"><a href="#中断命中结果" class="headerlink" title="中断命中结果"></a>中断命中结果</h3><p>这是一个节点，可以获取“命中结果”类型数据的信息（法线，位置，时间等等）</p>
<h3 id="由通道检测球体"><a href="#由通道检测球体" class="headerlink" title="由通道检测球体"></a>由通道检测球体</h3><p>此节点和球形碰撞检测的“碰撞预设”中的“检测相应”相关。</p>
<p>要想运用此节点，就需要创建新的碰撞检测通道，如果想要被检测到，就在节点设置中调用对应通道，并在球形碰撞检测的详情面板中调整为“阻挡”</p>
<h3 id="获取表面类型"><a href="#获取表面类型" class="headerlink" title="获取表面类型"></a>获取表面类型</h3><p>是“由通道检测球体”的输出节点，由“Out Hit”引脚引出</p>
<p>获取碰撞到的物体的表面材质，属性，类别等信息</p>
<h3 id="物理材质-1"><a href="#物理材质-1" class="headerlink" title="物理材质"></a>物理材质</h3><p>新建-&gt;物理-&gt;物理材质</p>
<p>可在其中修改物理属性-&gt;表面类型</p>
<h3 id="在位置处生成发射器"><a href="#在位置处生成发射器" class="headerlink" title="在位置处生成发射器"></a>在位置处生成发射器</h3><p>在位置处生成一些粒子特效</p>
<h3 id="为模拟物理现象"><a href="#为模拟物理现象" class="headerlink" title="为模拟物理现象"></a>为模拟物理现象</h3><p>由“事件命中”节点引出，用来判断被击中的物体是否开启模拟物理选项</p>
<h3 id="添加冲量"><a href="#添加冲量" class="headerlink" title="添加冲量"></a>添加冲量</h3><p>由“事件命中”节点引出，给被击中的物体添加一个冲量，输入为一个向量“速度”</p>
<h3 id="播放位置处的音效"><a href="#播放位置处的音效" class="headerlink" title="播放位置处的音效"></a>播放位置处的音效</h3><p>字面意思</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>要先创建一个子弹父类蓝图</p>
<ul>
<li><p>添加一个球形碰撞检测</p>
</li>
<li><p>添加一个“发射物移动组件”，并设置其速度属性</p>
</li>
</ul>
</li>
<li><p>给子弹新增一个碰撞通道，默认响应设置为Block</p>
</li>
<li><p>回到子弹父类蓝图中，设置碰撞预设</p>
</li>
<li><p>编辑子弹击中物体时的蓝图逻辑</p>
<ul>
<li>用“事件命中”和“在位置处生成贴花”生成弹孔效果</li>
</ul>
</li>
<li><p>添加击中物体特效</p>
<ul>
<li>创建一个函数“击中物体特效”</li>
<li>用“中断命中结果”，“由通道检测球体”，“获取表面类型”来编写逻辑</li>
<li>最后用Switch来遍历获取到的表面类型，并“在位置处生成发射器”来生成例子特效</li>
</ul>
</li>
<li><p>在事件图表中调用“击中物体特效”函数</p>
</li>
<li><p>还需要判断被子弹击中的物体是否有“模拟物理”的效果，如果有，就要给它们添加一个冲量</p>
<ul>
<li><p>在事件图表中的“事件命中”节点的“Other Comp”引脚引出“is Valid”判断是否击中其他组件（模型）</p>
</li>
<li><p>接着引出“为模拟物理现象”和“为模拟物理现象”来判断击中的目标是否模拟物理</p>
</li>
<li><p>用“添加冲量”为被击中的物体添加冲量</p>
</li>
<li><p>最后销毁子弹Actor</p>
</li>
</ul>
</li>
<li><p>添加子弹击中物体的音效</p>
<ul>
<li>“事件开始运行”节点引出“播放位置处的音效”，将音效提升为变量“武器音效”，并“获取Actor位置”</li>
</ul>
</li>
<li><p>现在已经把通用父类的逻辑编辑好，如今根据父类创建一个蓝图子类“BP_AKM_Bullet”</p>
<ul>
<li><p>在眼睛图标那边点击显示继承的变量</p>
</li>
<li><p>设置“武器音效”</p>
</li>
</ul>
</li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li><p>添加球形碰撞检测之后需要使其覆盖最上层的组件</p>
</li>
<li><p>如果要给子弹添加网格体，那就需要将子弹的碰撞预设改成NoCollision（因为碰撞是由球形碰撞盒子进行检测的）</p>
</li>
<li><p>碰撞预设设置为自定义的，并且碰撞启用“检测和物理”，并且碰撞相应得设置为阻挡（除了Pawn）</p>
</li>
<li><p>“由通道检测球体”节点需要创建碰撞检测通道，并绑定</p>
</li>
<li><p>销毁子弹的时候使用“序列”节点，并且放在“在位置处生成贴花”后面</p>
</li>
</ol>
<h1 id="发射子弹"><a href="#发射子弹" class="headerlink" title="发射子弹"></a>发射子弹</h1><h2 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h2><h3 id="获取插槽变换"><a href="#获取插槽变换" class="headerlink" title="获取插槽变换"></a>获取插槽变换</h3><p>由一个拥有骨骼的组件（静态网格体组件）引出，即可获得虚拟插槽的位置信息</p>
<h3 id="箭头组件"><a href="#箭头组件" class="headerlink" title="箭头组件"></a>箭头组件</h3><p>一个游戏中看不见的箭头，可根据箭头位置生成抛壳特效</p>
<h3 id="以事件设置定时器"><a href="#以事件设置定时器" class="headerlink" title="以事件设置定时器"></a>以事件设置定时器</h3><p>和之前的以函数名设置定时器差不多，是倒计时结束之后就开始执行引入的事件</p>
<h3 id="以句柄清除定时器并使之无效"><a href="#以句柄清除定时器并使之无效" class="headerlink" title="以句柄清除定时器并使之无效"></a>以句柄清除定时器并使之无效</h3><p>就是清除定时器的意思，但是注意的是，引入引脚需要是“要清除定时器”的返回值</p>
<h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>在武器基类蓝图中添加三个自定义事件“射击中”，“开始射击”，“停止射击”</p>
</li>
<li><p>射击中状态，是不断有子弹从枪口位置生成的</p>
<ul>
<li><p>生成子弹由“从类生成Actor”解决</p>
</li>
<li><p>生成位置，首先在枪口处创建一个虚拟骨骼，然后由“获取插槽变换”来获取其位置</p>
</li>
</ul>
</li>
<li><p>射击状态，会有抛弹壳的特效</p>
<ul>
<li><p>使用节点“在位置处生成发射器”来实现抛壳特效</p>
</li>
<li><p>创建一个箭头组件，特效生成位置根据此箭头组件位置调整</p>
</li>
</ul>
</li>
<li><p>另外还有枪口的火焰特效</p>
<ul>
<li><p>用“在位置处生成发射器”生成粒子特效</p>
</li>
<li><p>用枪口的虚拟骨骼位置确定生成位置</p>
</li>
</ul>
</li>
<li><p>最后需要设置开枪时候武器的动画（枪栓的移动）</p>
<ul>
<li><p>创建一个“动画序列”类型的变量“武器动画”</p>
</li>
<li><p>用“播放动画”节点选择目标和要播放的动画</p>
</li>
</ul>
</li>
<li><p>接下来是实现“开始射击”</p>
<ul>
<li><p>通过“以事件设置定时器”来调用“射击中”事件</p>
</li>
<li><p>将延迟时间，也就是“Time”引脚提升为变量，命名为“射速”</p>
</li>
<li><p>在执行定时器之前还需要先调用一次“射击中”事件，否则开第一枪会有“射速”的延迟</p>
</li>
<li><p>最后给定时器勾选“Looping”</p>
</li>
</ul>
</li>
<li><p>停止射击</p>
<ul>
<li>在“开始射击”的“以事件设置定时器”的返回值引出“以句柄清除定时器并使之无效”节点，即可停止射击</li>
</ul>
</li>
<li><p>在武器子类中设置在父类中创建的变量</p>
</li>
<li><p>在角色蓝图类的“射击”事件图表中调用“武器实例”的“开始射击”和“停止射击”节点</p>
</li>
</ol>
<h1 id="弹壳落地音效"><a href="#弹壳落地音效" class="headerlink" title="弹壳落地音效"></a>弹壳落地音效</h1><h2 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h2><h3 id="音效Cue"><a href="#音效Cue" class="headerlink" title="音效Cue"></a>音效Cue</h3><p>专门针对音效的一种蓝图</p>
<h3 id="随机"><a href="#随机" class="headerlink" title="随机"></a>随机</h3><p>音效Cue中的一个节点，随机播放输入的音效</p>
<h3 id="调制器"><a href="#调制器" class="headerlink" title="调制器"></a>调制器</h3><p>音效Cue中的一个节点，可以在一定范围内随机音量和音高</p>
<h3 id="衰减"><a href="#衰减" class="headerlink" title="衰减"></a>衰减</h3><p>音效Cue中的属性设置，可以使得声音拥有距离感和方向感</p>
<h3 id="分配On-Particle-Collide"><a href="#分配On-Particle-Collide" class="headerlink" title="分配On Particle Collide"></a>分配On Particle Collide</h3><p>当例子特效碰到其他物体的时候，就会触发此事件</p>
<h3 id="Do-N"><a href="#Do-N" class="headerlink" title="Do N"></a>Do N</h3><p>此节点设置某事件可执行N次</p>
<h2 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>设置音效本身，根据音效创建Cue，然后使得同种类型的三个音效随机播放（为了显得真实，不那么单调）</p>
</li>
<li><p>在武器基类中调用音效</p>
<ul>
<li><p>在实现抛壳特效后面使用分支节点，链接“分配On Particle Collide”</p>
</li>
<li><p>用“Do N”节点，在执行第三次的时候播放结束音效，“延迟”0.5秒之后再重置“Do N”节点</p>
</li>
</ul>
</li>
</ol>
<h1 id="角色装备武器音效"><a href="#角色装备武器音效" class="headerlink" title="角色装备武器音效"></a>角色装备武器音效</h1><h2 id="知识点-3"><a href="#知识点-3" class="headerlink" title="知识点"></a>知识点</h2><h3 id="播放音效2D"><a href="#播放音效2D" class="headerlink" title="播放音效2D"></a>播放音效2D</h3><p>播放一个没有空间感，距离感的音效（就很平面）</p>
<h2 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>在角色蓝图中“瞄准状态切换”事件图表中添加“播放音效2D”来设置音效</p>
</li>
<li><p>需要修改之前的瞄准和射击事件中的切换状态，以免多次播放音效</p>
<ul>
<li><p>在松开瞄准和松开射击的引脚后都需要判断角色是否持枪</p>
</li>
<li><p>在瞄准更改弹簧臂长度之前需要判断角色是否瞄准</p>
</li>
</ul>
</li>
</ol>
<h1 id="角色跳跃音效"><a href="#角色跳跃音效" class="headerlink" title="角色跳跃音效"></a>角色跳跃音效</h1><h2 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h2><ol>
<li>在角色蓝图“跳跃的动画和高度设置”函数内，蒙太奇播放节点前添加“播放音效2D”</li>
</ol>
<h1 id="武器全自动和半自动切换"><a href="#武器全自动和半自动切换" class="headerlink" title="武器全自动和半自动切换"></a>武器全自动和半自动切换</h1><h2 id="思路-5"><a href="#思路-5" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>添加一个按键映射“切换全自动”，按键设置为B</p>
</li>
<li><p>在武器基类蓝图中新建变量“是否全自动”，并在定时器之前判断</p>
</li>
<li><p>在角色蓝图中创建新图表“全自动和半自动切换”</p>
<ul>
<li>修改武器蓝图中的“是否全自动”值</li>
</ul>
</li>
<li><p>在角色射击时切换全自动或半自动需要停止射击</p>
<ul>
<li><p>在射击事件图表中，停止松开鼠标停止射击那一串逻辑，在之前添加一个自定义事件“停止射击”，将其包含进去</p>
</li>
<li><p>在切换全自动&#x2F;半自动状态后面调用“停止射击”事件</p>
</li>
</ul>
</li>
<li><p>全自动和半自动之间的切换取决于角色的操作，但是全自动于半自动之间的表现取决于枪支的动画表现，所以在此我们需要将角色蓝图中设置的全自动于半自动切换引到武器蓝图当中去</p>
<ul>
<li><p>在武器基类中实现和角色蓝图之间的通信（获取类所有Actor）</p>
</li>
<li><p>在武器蓝图“射击”图表中“停止射击”后判断了“是否全自动”，true连接了循环播放动画</p>
</li>
<li><p>那么false链接上角色蓝图中的“停止射击”事件</p>
</li>
<li><p>与此同时，如果直接“停止射击”，则不会播放射击时的角色动画（后坐力动画），所以需要延迟0.1秒之后再“停止射击”</p>
</li>
</ul>
</li>
</ol>
<h1 id="武器后坐力（枪口向上偏移）"><a href="#武器后坐力（枪口向上偏移）" class="headerlink" title="武器后坐力（枪口向上偏移）"></a>武器后坐力（枪口向上偏移）</h1><h2 id="知识点-4"><a href="#知识点-4" class="headerlink" title="知识点"></a>知识点</h2><h3 id="范围内随机浮点"><a href="#范围内随机浮点" class="headerlink" title="范围内随机浮点"></a>范围内随机浮点</h3><p>就是在一定范围内随机取浮点数</p>
<h2 id="思路-6"><a href="#思路-6" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>实现后坐力的效果就是使得玩家的控制器不受玩家控制得向上偏移，有两个需要注意的点</p>
<ul>
<li><p>获得玩家控制器，也就是“获取玩家Pawn”</p>
</li>
<li><p>控制器向上偏移，也就是之前用于控制玩家视口转向的节点“添加控制器Pitch输入”</p>
</li>
<li><p>那么再武器基类蓝图中新建一个事件图表“武器后坐力”，然后新建一个自定义事件，通过“获取玩家Pawn”节点调用“添加控制器Pitch输入”</p>
</li>
<li><p>然后需要将“添加控制器Pitch输入”的val设置为<mark>-0.4</mark>（后面会提升为变量使用）</p>
</li>
</ul>
</li>
<li><p>创建好后坐力之后需要在“射击”图表中调用“后坐力事件”</p>
</li>
<li><p>接下来是动画效果的优化，如果不进行这一步的话，动画效果感觉一抽一抽的</p>
<ul>
<li><p>用时间轴来解决这个问题</p>
</li>
<li><p>添加一个自定义事件“后坐力回弹”</p>
</li>
<li><p>添加一个时间轴</p>
</li>
<li><p>两个自定义事件分别链接上“play from start”和”Reverse”</p>
</li>
<li><p>在finish引脚处调用“后坐力回弹”</p>
</li>
<li><p>创建时间轴轨道，三个关键帧分别为(0,0)，(0.02,1)，(0.1,0)</p>
</li>
<li><p>新建浮点型变量”后坐力pitch”和“后坐力Yaw”</p>
</li>
<li><p>时间轴轨道引出”插值”节点，连接上“Alpha”引脚，“后坐力Picth”连接上B引脚</p>
</li>
<li><p>返回值乘以-1后链接上“添加控制器Pitch”的val引脚</p>
</li>
<li><p>时间轴的Direction引脚引出“switch”节点，快进引脚链接上未乘以-1的“添加玩家控制器pitch”，快退链接上另一个</p>
</li>
<li><p>除了向上后坐力，还有左右偏移</p>
</li>
<li><p>在末尾连上“添加控制器Yaw输入”，val引脚链接“Yaw”乘以-1之后“范围内随机浮点”的值</p>
</li>
</ul>
</li>
<li><p>在父类中添加了“后坐力Pitch”和“后坐力Yaw”，还需要再子类中设置其具体的值</p>
</li>
</ol>
<h1 id="角色换弹动画及音效"><a href="#角色换弹动画及音效" class="headerlink" title="角色换弹动画及音效"></a>角色换弹动画及音效</h1><h2 id="知识点-5"><a href="#知识点-5" class="headerlink" title="知识点"></a>知识点</h2><h3 id="Do-Once"><a href="#Do-Once" class="headerlink" title="Do Once"></a>Do Once</h3><p>和Do N差不多，字面意思啦！</p>
<h3 id="旋转浮点"><a href="#旋转浮点" class="headerlink" title="旋转浮点"></a>旋转浮点</h3><p>根据bool值来进行输出</p>
<p>若true则输出A引脚的值</p>
<p>若false则输出B引脚的值</p>
<h2 id="思路-7"><a href="#思路-7" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>创建三个整数型变量“子弹数量”，“弹夹数量”，“子弹总数量”</p>
</li>
<li><p>在子弹消耗完之后就不可以继续开枪，所以在武器蓝图中的“射击”图表中，“射击中”的开端需要判断子弹数量是否为0，如果为0，则停止播放音效，也停止角色射击动画；如果不为零，则继续射击</p>
<ul>
<li><p>需要使用到“Do Once”和“序列”节点进行配合</p>
</li>
<li><p>“Do Once”用来执行一次“子弹耗尽音效”和“停止射击”</p>
</li>
<li><p>“序列”用来在换弹之后去Reset“Do Once”节点</p>
</li>
</ul>
</li>
<li><p>换弹操作是由角色控制的，所以在操作映射中添加一个换弹操作“R”，然后再角色蓝图中新增一个事件图表“换弹”</p>
<ul>
<li><p>判断角色是否持枪，是否在执行其他状态（判断方法同角色射击蓝图）</p>
</li>
<li><p>判断子弹数量是否大于子弹总数量（弹夹内子弹数量），false则可以换弹</p>
</li>
<li><p>判断弹夹数量是否小于等于0，false则可以换弹</p>
</li>
<li><p>还需要更改枚举值的功能状态（枚举中新增一个功能状态“换弹”）</p>
</li>
<li><p>换弹时需要停止射击</p>
</li>
</ul>
</li>
<li><p>设置换弹动画</p>
<ul>
<li><p>找到换弹动画序列，将其取消根节点运动，提升为蒙太奇动画，设置好插槽“换弹”</p>
</li>
<li><p>在动画蓝图中“功能状态机”里添加新的状态“换弹”，添加变量“是否换弹”用于切换状态</p>
</li>
<li><p>在“换弹”状态中调用“换弹”插槽，和“总状态缓存”，以“每个骨骼的分层混合”来进行半身混合设置</p>
</li>
</ul>
</li>
<li><p>调用换弹动画</p>
<ul>
<li><p>在角色蓝图的“换弹”，停止射击之后切换“是否换弹”，然后调用蒙太奇播放来播放蒙太奇动画</p>
</li>
<li><p>延迟之后将“是否换弹”切换回来，再设置状态为空白</p>
</li>
</ul>
</li>
<li><p>在AKM中设置“子弹数量”，“子弹总数量”，“弹夹数量”</p>
</li>
<li><p>在武器基类蓝图中添加“子弹减少”的功能</p>
<ul>
<li>在武器基类蓝图的最末尾，子弹数量“–”</li>
</ul>
</li>
<li><p>子弹射击完之后需要有一个子弹耗尽的音效</p>
<ul>
<li><p>在角色蓝图类中判断了是否持枪以及自身枚举状态之后，判断子弹数量是否为零</p>
</li>
<li><p>若不为零，则继续正常射击</p>
</li>
<li><p>若为零，则播放子弹耗尽音效</p>
</li>
</ul>
</li>
<li><p>换弹状态不能被射击的“停止瞄准”事件的定时器将状态切换为空白</p>
<ul>
<li><p>所以将其“停止射击”事件修改一下</p>
</li>
<li><p>如果“是否换弹”为false，才可以将状态修改为空白</p>
</li>
<li><p>同样，瞄准状态也是一样的处理方式</p>
</li>
</ul>
</li>
<li><p>换弹的时候角色速度应该没那么快，所以需要在“角色速度判断”函数中修改</p>
<ul>
<li>使用以“是否换弹”为判断条件的“旋转浮点”</li>
</ul>
</li>
</ol>
<h1 id="弹夹附加到手上及丢弃"><a href="#弹夹附加到手上及丢弃" class="headerlink" title="弹夹附加到手上及丢弃"></a>弹夹附加到手上及丢弃</h1><h2 id="知识点-6"><a href="#知识点-6" class="headerlink" title="知识点"></a>知识点</h2><h3 id="动画通知"><a href="#动画通知" class="headerlink" title="动画通知"></a>动画通知</h3><p>之前在拔枪那一节中运用过</p>
<p>动画通知&#x3D;函数</p>
<p>动画的某一帧调用函数</p>
<h3 id="从Actor分离"><a href="#从Actor分离" class="headerlink" title="从Actor分离"></a>从Actor分离</h3><p>字面意思啦！</p>
<h2 id="思路-8"><a href="#思路-8" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>三个动画通知</p>
<ul>
<li><p>把弹夹从枪械上拔下来（弹夹从跟随枪械运动变为跟随手运动，延迟之后松开弹夹使其掉落到地上）</p>
</li>
<li><p>生成一个新的弹夹拿出来（生成新弹夹，附加到手部并跟随运动）</p>
</li>
<li><p>把弹夹插到枪械上（弹夹运动到靠近枪械位置之后，附加到枪械上）</p>
</li>
</ul>
</li>
<li><p>创建动画通知，并添加到动画中</p>
<ul>
<li><p>创建弹夹掉落，换弹结束，生成弹夹三个通知</p>
</li>
<li><p>在动画序列中新建一个通知轨道，将三个通知放入合适的位置</p>
</li>
</ul>
</li>
<li><p>创建弹匣基类</p>
<ul>
<li><p>创建一个Actor蓝图类取名为“BP_MagazineBase”作为弹匣基类</p>
<ul>
<li><p>添加静态网格体组件</p>
</li>
<li><p>设置碰撞预设为自定义，碰撞启用设置为查询和物理，对象类型设置为物理类型（忽略pawn的碰撞响应，不然会卡碰撞）</p>
</li>
</ul>
</li>
<li><p>在武器基类蓝图中的“事件图表”中使用“序列”节点的第二个引脚</p>
<ul>
<li><p>从类生成Actor，将类提升为变量“弹匣”，返回值提升为变量“弹匣引用”</p>
</li>
<li><p>“创建变换”节点引入位置信息</p>
</li>
</ul>
</li>
<li><p>“附加Actor到组件”节点将弹匣引用附加到武器模型上</p>
</li>
</ul>
</li>
<li><p>在子类中设置具体需要附加到的弹匣是哪一个</p>
<ul>
<li>以“BP_MagazineBase”为父类创建子类“BP_AKM_Magazine”，设置具体模型</li>
</ul>
</li>
<li><p>弹匣分离</p>
<ul>
<li><p>在弹匣父类中创建自定义事件“弹匣分离”</p>
</li>
<li><p>使用“从Actor分离”节点，“模拟物理”节点，”延迟“节点，“销毁”节点</p>
</li>
</ul>
</li>
<li><p>调用弹匣分离</p>
<ul>
<li><p>在武器基类蓝图中创建新图表“换弹”</p>
</li>
<li><p>添加三个自定义事件“拔下弹匣”，“生成新弹匣”，“换弹结束”</p>
</li>
<li><p>”拔下弹匣“事件将”弹匣引用“从角色蓝图的网格体上“附加Actor到组件”（将弹匣附加到角色的手上）</p>
</li>
<li><p>编辑“附加Actor到组件”节点，在角色骨骼的手上创建插槽，编辑好插槽位置之后将其名称填写到节点的Socket Name引脚上</p>
</li>
<li><p>延迟0.1秒之后将“弹匣引用”转换为“BP_MagazineBase”，调用“弹匣分离”</p>
</li>
<li><p>最后在动画通知“Notif_ClipDroppedAnimation”中调用角色蓝图中的“武器实例”，再调用“弹匣分离”</p>
</li>
</ul>
</li>
<li><p>生成新弹匣</p>
<ul>
<li><p>从弹匣类生成Actor，然后将其附加到组件</p>
</li>
<li><p>需要将弹匣数量–</p>
</li>
<li><p>最后在动画通知中调用</p>
</li>
</ul>
</li>
<li><p>换弹结束</p>
<ul>
<li><p>将弹匣引用附加到武器实例上，还需要将子弹数量设置为子弹总数量（一个弹匣中的子弹数量）</p>
</li>
<li><p>在动画通知中调用</p>
</li>
</ul>
</li>
</ol>
<h1 id="角色脚步声音效"><a href="#角色脚步声音效" class="headerlink" title="角色脚步声音效"></a>角色脚步声音效</h1><h2 id="知识点-7"><a href="#知识点-7" class="headerlink" title="知识点"></a>知识点</h2><h3 id="由通道检测线条"><a href="#由通道检测线条" class="headerlink" title="由通道检测线条"></a>由通道检测线条</h3><p>将沿给定线条执行碰撞追踪，并返回所有遭遇的命中，直到并包含首次阻挡命中，只返回对特定追踪通道响应的对象。</p>
<p>这就意味着追踪的开始和结束之间有多个带碰撞的Actor 或 组件 与特定的追踪通道发生重叠，而您将接收到所有的 Actor 和组件。</p>
<p>但是，如果首次命中阻挡了特定的追踪通道，则只会接收到这一个内容。</p>
<p>如希望无视追踪通道的重叠或阻挡接受所有内容，则需要使用MultiLineTraceByObject 节点</p>
<h2 id="思路-9"><a href="#思路-9" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>用Cue制作各自类型的脚步声</p>
</li>
<li><p>给角色网格体添加两个箭头组件，分别为“左脚”，“右脚”，并附加到相应骨骼位置</p>
</li>
<li><p>创建一个函数“脚步声判断”</p>
<ul>
<li><p>添加场景组件类型的输入“哪只脚”，获取其“场景位置”</p>
</li>
<li><p>根据“由通道检测线条”节点，起始点为箭头位置，终点为箭头向下50cm（向量-向量）位置</p>
</li>
<li><p>判断是否由返回值，若有，则“获取表面类型”，switch，再“中断命中结果”获取位置信息</p>
</li>
<li><p>根据位置信息播放不同的音效“播放位置处的音效”</p>
</li>
</ul>
</li>
<li><p>调用“脚步声判断”函数</p>
<ul>
<li><p>新建事件图表“脚步声”</p>
</li>
<li><p>新建自定义事件“左脚步声”，“右脚步声”，分别调用函数，参数分别传入“左脚”以及“右脚”</p>
</li>
</ul>
</li>
<li><p>创建动画通知调用“脚步声”事件</p>
<ul>
<li><p>创建左脚，右脚脚步声动画通知</p>
</li>
<li><p>”获取拥有者“，转换为BP_Player，分别调用“左脚步声”，“右脚步声”</p>
</li>
</ul>
</li>
<li><p>最后将动画通知添加到所有和脚步声有关的动画中去</p>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag"># 项目</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/06/09/UE4-%E9%A1%B9%E7%9B%AE-%E6%AD%BB%E5%AF%82-%E8%A7%92%E8%89%B2%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%B8%80%EF%BC%89/" rel="prev" title="UE4-项目-死寂-角色武器系统（一）">
                  <i class="fa fa-chevron-left"></i> UE4-项目-死寂-角色武器系统（一）
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/06/23/UE4-%E9%A1%B9%E7%9B%AE-%E6%AD%BB%E5%AF%82-%E6%8B%BE%E5%8F%96%E7%B3%BB%E7%BB%9F%E5%8F%8A%E6%AD%A6%E5%99%A8%E5%88%87%E6%8D%A2/" rel="next" title="UE4-项目-死寂-拾取系统及武器切换">
                  UE4-项目-死寂-拾取系统及武器切换 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">williny</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
