<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="孤独是人生的常态">
<meta property="og:type" content="website">
<meta property="og:title" content="Williny&#39;home">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Williny&#39;home">
<meta property="og:description" content="孤独是人生的常态">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="williny">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Williny'home</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Williny'home</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="williny"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">williny</p>
  <div class="site-description" itemprop="description">孤独是人生的常态</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">172</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/suchangche" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;suchangche" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:469478061@qq.com" title="E-Mail → mailto:469478061@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/05/27/RPG%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AF%B9%E8%AF%9D%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/27/RPG%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AF%B9%E8%AF%9D%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" class="post-title-link" itemprop="url">RPG游戏开发-对话系统架构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-05-27 11:41:35 / 修改时间：15:40:56" itemprop="dateCreated datePublished" datetime="2023-05-27T11:41:35+08:00">2023-05-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%B3%BB%E7%BB%9F%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">系统框架设计</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="系统说明"><a href="#系统说明" class="headerlink" title="系统说明"></a>系统说明</h1><p>在一款复杂RPG游戏中，任务往往伴随着各种复杂的对话，这些对话会跟随着任务的推进给玩家展示不同的文本内容与分支选项。</p>
<p>对话系统需要给玩家展示的部分包括：</p>
<ol>
<li><p>NPC文本内容</p>
</li>
<li><p>玩家选项以及选择对应选项会触发的事件</p>
</li>
</ol>
<p>对话是和任务强相关的，对话可以做到发放以及接取任务，而任务可以做到修改对话内容以及分支结构。所以对话系统其实是任务系统的一个附属系统。在设计本系统的时候需要考虑到和任务系统的兼容性。</p>
<h1 id="系统特性"><a href="#系统特性" class="headerlink" title="系统特性"></a>系统特性</h1><ol>
<li><p>本系统是一个后端架构，不需要过于关注前端的表现形式，只需要用高效的方式解决数据结构方面的内容即可。</p>
</li>
<li><p>本系统需要给框架使用者<code>留下足够的拓展和定制化功能开发空间</code>，在遇到需要用对话系统触发的需求，并且此需求在整个游戏流程中使用次数不多，不值得写入对话系统本体的时候，需要留有接口让框架使用者可以定制化开发。</p>
</li>
<li><p>本系统主要<code>运行在客户端</code>，不太需要过于关注反作弊的内容，如果有作弊者操作客户端上对话达到给玩家发放稀有任务。这些反作弊操作应该交给任务系统进行管理。</p>
</li>
</ol>
<h1 id="系统框架设计"><a href="#系统框架设计" class="headerlink" title="系统框架设计"></a>系统框架设计</h1><h2 id="数据结构设计"><a href="#数据结构设计" class="headerlink" title="数据结构设计"></a>数据结构设计</h2><h3 id="简单需求使用栈可以解决问题"><a href="#简单需求使用栈可以解决问题" class="headerlink" title="简单需求使用栈可以解决问题"></a>简单需求使用栈可以解决问题</h3><p>我在开发过程中参考过<a target="_blank" rel="noopener" href="https://blog.csdn.net/float_freedom/article/details/126375090"><code>Unity</code>游戏开发：对话系统的实现_unity对话系统-CSDN博客</a>中对话实现的方式，发现是用弹栈，压栈的方式操作对话。此方法可以一定程度上有较好的表现，维护起来也比较方便。</p>
<p>但是这个方法存在一些问题：</p>
<ol>
<li><p>如果单纯用栈来存储对话，当NPC身上存在多个任务相关的对话的时候一个栈无法解决此问题，只能使用多个栈来进行存储。</p>
</li>
<li><p>此方法无法解决NPC的对话，玩家存在多个选择，玩家的选择导向了不同的结果的需求。</p>
</li>
<li><p>对话的<code>改</code>部分相当不好维护，假设我想在对话中间插入一句话，则需要一个个弹栈，然后压栈。</p>
</li>
</ol>
<p>综上所述，用栈来存储对话只能解决一些不复杂的系统需求，如果是复杂的环境，栈处理起来还是比较乏力的。</p>
<h3 id="数组链表"><a href="#数组链表" class="headerlink" title="数组链表"></a>数组链表</h3><p>抛弃栈存储之后，想到《底特律:变人》是以剧情对话为主的游戏，其中的剧情流程图其实就是给玩家打明牌。他们表现出来的结构就是一个横着的多叉树。</p>
<p>但我最终并没有选择使用多叉树来设计数据结构，而是选择使用数组中模拟链表的形式来解决问题。</p>
<p>此数据结构分两层，外层是外部数组，内层是链表。</p>
<h4 id="数据结构详解"><a href="#数据结构详解" class="headerlink" title="数据结构详解"></a>数据结构详解</h4><h5 id="外层数组"><a href="#外层数组" class="headerlink" title="外层数组"></a>外层数组</h5><p>外层的数组决定了这个对话最长的长度。</p>
<p>用lua的Table模拟出来是以下结构</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> DialogueArray=</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="number">1</span>]=&#123;...&#125;,</span><br><span class="line">    [<span class="number">2</span>]=&#123;...&#125;,</span><br><span class="line">    [<span class="number">3</span>]=&#123;...&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们暂且不去考虑内层的链表的数据结构，只考虑外层的数组的功能和初始化方式。</p>
<ol>
<li><p>对话的长度决定了数组的长度（就是NPC说了几句话）</p>
</li>
<li><p>可能会出现一个对话有多个分支选项，其中一个分支选项NPC说了10句话，另一个分支选项NPC只说了5句话。此时数组的长度是10</p>
</li>
</ol>
<h5 id="内层链表"><a href="#内层链表" class="headerlink" title="内层链表"></a>内层链表</h5><ol>
<li><p>数组元素内存储的是一个个链表的节点。</p>
</li>
<li><p>一个数组元素内可以同时存在多个链表节点。</p>
</li>
<li><p>数组下标为1的元素内存储的链表节点中存储着与链表节点2的元素中的链表节点之间的关系</p>
</li>
</ol>
<p>第三点说起来有点绕口，但实际上很简单，就是常规的链表数据结构，在当前节点描述下一个节点的信息</p>
<p>用lua的Table模拟出来就是这样的</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;节点ID&quot;</span>]=</span><br><span class="line"> &#123;</span><br><span class="line"> Content=<span class="string">&quot;当前节点NPC的文本内容&quot;</span></span><br><span class="line"> Next=<span class="string">&quot;下一个节点的ID&quot;</span></span><br><span class="line"> Pre=<span class="string">&quot;上一个节点的ID&quot;</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>但是以上的数据结构还比较简陋，并不具备解决多分支选项的能力。</p>
<p>所以此时需要给这个数据结构加点料！</p>
<p>其实想要解决多分支选项问题很简单，上文中的数据结构中的<code>Next</code>以及<code>Pre</code>字段是一个<code>string</code>类型的变量。我们将其变为一个Table类型的变量即可解决这个问题。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;10003&quot;</span>]=</span><br><span class="line"> &#123;</span><br><span class="line"> Content=<span class="string">&quot;当前节点NPC的文本内容&quot;</span></span><br><span class="line"> Next=</span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="number">1</span>]=<span class="string">&quot;10001&quot;</span>,</span><br><span class="line">        [<span class="number">2</span>]=<span class="string">&quot;10002&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"> Pre=</span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="number">1</span>]=<span class="string">&quot;10004&quot;</span>,</span><br><span class="line">        [<span class="number">2</span>]=<span class="string">&quot;10005&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>这样的链表节点就可以导向多个链表节点了，而将上面的数据结构抽象化则如下图所示。</p>
<p><img src="https://wx3.sinaimg.cn/mw690/007W8a3Bgy1hecxszbxz1j31860oyabc.jpg"></p>
<h2 id="增删查改存取"><a href="#增删查改存取" class="headerlink" title="增删查改存取"></a>增删查改存取</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/26/Roblox-Tween/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/26/Roblox-Tween/" class="post-title-link" itemprop="url">Roblox-Tween</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-26 09:53:23 / 修改时间：09:55:09" itemprop="dateCreated datePublished" datetime="2022-12-26T09:53:23+08:00">2022-12-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Roblox 中的 Tween 是一种动画工具，可以让你轻松地在脚本中创建动画。使用 Tween，你可以在指定的时间内将对象的某些属性从一个值平滑地插值到另一个值。</p>
<p>要在 Roblox 中使用 Tween，你需要使用以下步骤：</p>
<ol>
<li>在需要使用 Tween 的脚本中引入 TweenService 模块：</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local TweenService = game:<span class="built_in">GetService</span>(<span class="string">&quot;TweenService&quot;</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建 TweenInfo 对象，并设置 Tween 的相关参数：</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> tweenInfo = TweenInfo.new(</span><br><span class="line">    duration,  <span class="comment">-- 动画时长，单位是秒</span></span><br><span class="line">    easingStyle,  <span class="comment">-- 缓动类型，可以是 Enum.EasingStyle 中的任意值</span></span><br><span class="line">    easingDirection  <span class="comment">-- 缓动方向，可以是 Enum.EasingDirection 中的任意值</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>创建 Tween 对象，并设置 Tween 的目标值：</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> tween = TweenService:Create(</span><br><span class="line">    object,  <span class="comment">-- 要操作的对象</span></span><br><span class="line">    tweenInfo,  <span class="comment">-- TweenInfo 对象</span></span><br><span class="line">    &#123;  <span class="comment">-- 目标值表，包含一个或多个属性和对应的值</span></span><br><span class="line">        Property = TargetValue,</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>启动 Tween：</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tween:Play()</span><br></pre></td></tr></table></figure>

<p>你也可以使用 Tween&#x2F;Cancel() 方法来取消 Tween：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tween:Cancel()</span><br></pre></td></tr></table></figure>

<p>还可以使用 Tween&#x2F;Completed 属性来获取 Tween 结束时的事件，以及 Tween&#x2F;Cancelled 属性来获取 Tween 被取消时的事件。</p>
<p>例如，你可以使用以下代码来在 Tween 结束时显示一条消息：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tween.Completed:Connect(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Tween completed&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<p>下面是一个示例，用 Tween 在 2 秒内将对象的位置从当前位置平滑移动到 (100, 100, 100)：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> TweenService = game:GetService(<span class="string">&quot;TweenService&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> object = script.Parent  <span class="comment">-- 要操作的对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> tweenInfo = TweenInfo.new(<span class="number">2</span>, Enum.EasingStyle.Linear, Enum.EasingD</span><br></pre></td></tr></table></figure>

<p>使用 Tween 来实现 CFrame1 到 CFrame2 的平滑过渡。</p>
<p>在ReplicatedStorage中声明Tween</p>
<p>调用</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> Tween = <span class="built_in">require</span>(game.ReplicatedStorage:WaitForChild(<span class="string">&quot;Tween&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 定义 CFrame1 和 CFrame2</span></span><br><span class="line"><span class="keyword">local</span> CFrame1 = CFrame.new(Vector3.new(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="keyword">local</span> CFrame2 = CFrame.new(Vector3.new(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建一个 Tween 实例</span></span><br><span class="line"><span class="keyword">local</span> tween = Tween.new(<span class="number">5</span>, Tween.EasingStyle.Linear, Tween.EasingDirection.Out)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在 Tween 实例上设置 &quot;Value&quot; 属性</span></span><br><span class="line">tween:TweenProperty(<span class="string">&quot;Value&quot;</span>, CFrame1, CFrame2)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 连接 Tween 实例的 &quot;Value&quot; 属性与某个对象的 &quot;CFrame&quot; 属性</span></span><br><span class="line">tween.Value:Connect(object.CFrame)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开始 Tween 实例</span></span><br><span class="line">tween:Start()</span><br></pre></td></tr></table></figure>

<p>在这个示例中，我们创建了一个 Tween 实例，并使用 <code>TweenProperty</code> 方法将 “Value” 属性设置为 CFrame1 和 CFrame2 之间的过渡。然后，我们将 Tween 实例的 “Value” 属性连接到某个对象的 “CFrame” 属性，这样就可以在 Tween 实例运行期间将对象的 CFrame 从 CFrame1 平滑过渡到 CFrame2。</p>
<p>请注意，在这个示例中，我们使用的是线性过渡效果，但是 Tween 模块还提供了其他类型的过渡效果，例如弹性过渡、弧形过渡等。您可以使用 <code>Tween.EasingStyle</code> 和 <code>Tween.EasingDirection</code>参数来调整过渡的类型和方向。</p>
<p>下面是一些例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 弹性过渡，由慢到快再到慢</span></span><br><span class="line"><span class="keyword">local</span> tween = Tween.new(<span class="number">5</span>, Tween.EasingStyle.Elastic, Tween.EasingDirection.InOut)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 弧形过渡，由快到慢</span></span><br><span class="line"><span class="keyword">local</span> tween = Tween.new(<span class="number">5</span>, Tween.EasingStyle.Quadratic, Tween.EasingDirection.Out)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 平方过渡，由慢到快</span></span><br><span class="line"><span class="keyword">local</span> tween = Tween.new(<span class="number">5</span>, Tween.EasingStyle.Quadratic, Tween.EasingDirection.In)</span><br></pre></td></tr></table></figure>

<p>此外，还可以使用 <code>Tween.TimeLength</code> 参数来指定过渡的持续时间，使用 <code>Tween.DelayTime</code> 参数来指定过渡开始前的延迟时间，使用 <code>Tween.RepeatCount</code> 参数来指定过渡的重复次数，等等。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/26/Roblox-Input/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/26/Roblox-Input/" class="post-title-link" itemprop="url">Roblox-Input</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-26 09:52:02" itemprop="dateCreated datePublished" datetime="2022-12-26T09:52:02+08:00">2022-12-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-27 11:43:56" itemprop="dateModified" datetime="2023-05-27T11:43:56+08:00">2023-05-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><h2 id="UserInputService"><a href="#UserInputService" class="headerlink" title="UserInputService"></a>UserInputService</h2><p>使用<code>GetService</code>获取<code>UserInputService</code>，然后通过其中的三个事件监听输入</p>
<h3 id="InputBegan"><a href="#InputBegan" class="headerlink" title="InputBegan"></a>InputBegan</h3><p>此事件仅在Roblox客户端窗口处于焦点时触发</p>
<p>例如：当窗口最小化时不会监听玩家输入</p>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ol>
<li><p>此事件仅在<code>LocalScript</code>中触发</p>
</li>
<li><p>此事件可以与<code>UserInputService.InputChanged</code>以及<code>UserInputService.InputEnded</code>一起用</p>
</li>
</ol>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><table>
<thead>
<tr>
<th>参数名</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>input: InputObject</td>
<td>InputObject实例，包含有关用户输入的信息</td>
</tr>
<tr>
<td>gameProcessedEvent: boolean</td>
<td>指示游戏引擎是否在内部观察到此输入并对其进行操作。通常，这是指UI处理，因此如果从该输入中触摸或单击按钮，gameProcessedEvent将为true。对于通过ContextActionService连接的输入事件也是如此。</td>
</tr>
</tbody></table>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- In order to use the InputBegan event, the UserInputService service must be used</span></span><br><span class="line"><span class="keyword">local</span> UserInputService = game:GetService(<span class="string">&quot;UserInputService&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A sample function providing multiple usage cases for various types of user input</span></span><br><span class="line">UserInputService.InputBegan:Connect(<span class="function"><span class="keyword">function</span><span class="params">(input, gameProcessed)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Keyboard <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A key is being pushed down! Key:&quot;</span>, <span class="built_in">input</span>.KeyCode)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.MouseButton1 <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The left mouse button has been pressed down at&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.MouseButton2 <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The right mouse button has been pressed down at&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Touch <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A touchscreen input has started at&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Gamepad1 <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A button is being pressed on a gamepad! Button:&quot;</span>, <span class="built_in">input</span>.KeyCode)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> gameProcessed <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The game engine internally observed this input!&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The game engine did not internally observe this input!&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<h4 id="监听玩家键盘输入"><a href="#监听玩家键盘输入" class="headerlink" title="监听玩家键盘输入"></a>监听玩家键盘输入</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> UserInputService = game:GetService(<span class="string">&quot;UserInputService&quot;</span>)</span><br><span class="line">UserInputService.InputBegan:Connect(<span class="function"><span class="keyword">function</span><span class="params">(inputObject)</span></span></span><br><span class="line">    <span class="keyword">if</span> inputObject.KeyCode == Enum.KeyCode.Q <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Q!&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<h3 id="InputChanged"><a href="#InputChanged" class="headerlink" title="InputChanged"></a>InputChanged</h3><p>与<code>InputBegan</code>的参与与注意事项相同</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- In order to use the InputChanged event, the UserInputService service must be used</span></span><br><span class="line"><span class="keyword">local</span> UserInputService = game:GetService(<span class="string">&quot;UserInputService&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Prints the current input position and the change (delta) in position</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">printMovement</span><span class="params">(input)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Position:&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Movement Delta:&quot;</span>, <span class="built_in">input</span>.Delta)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- A sample function providing multiple usage cases for various types of user input</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">InputChanged</span><span class="params">(input, _gameProcessed)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.MouseMovement <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The mouse has been moved!&quot;</span>)</span><br><span class="line">        printMovement(<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.MouseWheel <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The mouse wheel has been scrolled!&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Wheel Movement:&quot;</span>, <span class="built_in">input</span>.Position.Z)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Gamepad1 <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">input</span>.KeyCode == Enum.KeyCode.Thumbstick1 <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;The left thumbstick has been moved!&quot;</span>)</span><br><span class="line">            printMovement(<span class="built_in">input</span>)</span><br><span class="line">        <span class="keyword">elseif</span> <span class="built_in">input</span>.KeyCode == Enum.KeyCode.Thumbstick2 <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;The right thumbstick has been moved!&quot;</span>)</span><br><span class="line">            printMovement(<span class="built_in">input</span>)</span><br><span class="line">        <span class="keyword">elseif</span> <span class="built_in">input</span>.KeyCode == Enum.KeyCode.ButtonL2 <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;The pressure being applied to the left trigger has changed!&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Pressure:&quot;</span>, <span class="built_in">input</span>.Position.Z)</span><br><span class="line">        <span class="keyword">elseif</span> <span class="built_in">input</span>.KeyCode == Enum.KeyCode.ButtonR2 <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;The pressure being applied to the right trigger has changed!&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Pressure:&quot;</span>, <span class="built_in">input</span>.Position.Z)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Touch <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The user&#x27;s finger is moving on the screen!&quot;</span>)</span><br><span class="line">        printMovement(<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Gyro <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> _rotInput, rotCFrame = UserInputService:GetDeviceRotation()</span><br><span class="line">        <span class="keyword">local</span> rotX, rotY, rotZ = rotCFrame:toEulerAnglesXYZ()</span><br><span class="line">        <span class="keyword">local</span> rot = Vector3.new(<span class="built_in">math</span>.<span class="built_in">deg</span>(rotX), <span class="built_in">math</span>.<span class="built_in">deg</span>(rotY), <span class="built_in">math</span>.<span class="built_in">deg</span>(rotZ))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The rotation of the user&#x27;s mobile device has been changed!&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Position&quot;</span>, rotCFrame.p)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Rotation:&quot;</span>, rot)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Accelerometer <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The acceleration of the user&#x27;s mobile device has been changed!&quot;</span>)</span><br><span class="line">        printMovement(<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">UserInputService.InputChanged:Connect(InputChanged)</span><br></pre></td></tr></table></figure>

<h3 id="InputEnded"><a href="#InputEnded" class="headerlink" title="InputEnded"></a>InputEnded</h3><p>注意事项同上</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- In order to use the InputChanged event, the UserInputService service must be used</span></span><br><span class="line"><span class="keyword">local</span> UserInputService = game:GetService(<span class="string">&quot;UserInputService&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A sample function providing multiple usage cases for various types of user input</span></span><br><span class="line">UserInputService.InputEnded:Connect(<span class="function"><span class="keyword">function</span><span class="params">(input, gameProcessed)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Keyboard <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A key has been released! Key:&quot;</span>, <span class="built_in">input</span>.KeyCode)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.MouseButton1 <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The left mouse button has been released at&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.MouseButton2 <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The right mouse button has been released at&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Touch <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A touchscreen input has been released at&quot;</span>, <span class="built_in">input</span>.Position)</span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">input</span>.UserInputType == Enum.UserInputType.Gamepad1 <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A button has been released on a gamepad! Button:&quot;</span>, <span class="built_in">input</span>.KeyCode)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> gameProcessed <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The game engine internally observed this input!&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The game engine did not internally observe this input!&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-MonsterAI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-MonsterAI/" class="post-title-link" itemprop="url">Roblox-MonsterAI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:27:20 / 修改时间：14:28:08" itemprop="dateCreated datePublished" datetime="2022-12-18T14:27:20+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="实现怪物AI"><a href="#实现怪物AI" class="headerlink" title="实现怪物AI"></a>实现怪物AI</h1><p>1.首先需要在Roblox Studio中创建一个可操作的怪物模型，可以通过Roblox官方商店或者第三方资源库获取。</p>
<p>2.创建怪物的状态机，定义怪物的不同状态，如待机状态、移动状态、攻击状态等。状态机可以通过脚本实现，也可以使用Roblox Studio提供的事件系统进行实现。</p>
<p>3.在游戏中为怪物定义不同的行为，如移动、攻击、被攻击等。行为可以通过脚本实现，也可以通过拖拽Roblox Studio中提供的动画模块实现。</p>
<p>4.为怪物设置一定的随机因素，使得怪物的行为更加真实和多变，如随机移动、随机攻击等。</p>
<p>5.实现怪物的数据存储与管理，包括怪物的生命值、伤害值、移动速度等属性。可以通过Roblox Studio提供的数据存储模块进行实现。</p>
<h2 id="在roblox中实现怪物随机找点移动"><a href="#在roblox中实现怪物随机找点移动" class="headerlink" title="在roblox中实现怪物随机找点移动"></a>在roblox中实现怪物随机找点移动</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> characterModel = script.Parent</span><br><span class="line"><span class="keyword">local</span> humanoid = characterModel.Humanoid</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">  wait(<span class="built_in">math</span>.<span class="built_in">random</span>()*<span class="number">5</span>)</span><br><span class="line">  <span class="keyword">local</span> movePosition = workspace.Target.Position + Vector3.new(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">-40</span>, <span class="number">40</span>), <span class="number">0</span>, <span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">-40</span>, <span class="number">40</span>))</span><br><span class="line">  humanoid:MoveTo(movePosition)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们使用<code>wait()</code>函数让怪物在每次移动之间等待一段随机时间。然后使用<code>math.random()</code>生成一个随机的x和z坐标，将其加到当前怪物位置上，最后使用<code>humanoid:MoveTo()</code>函数让怪物移动到新的位置。</p>
<p>在这段代码中，我们假定了有一个名为”workspace.Target”的模型在场景中，它是怪物移动的参考点。你可以根据你游戏中的实际情况来替换它。</p>
<h2 id="在Roblox中使用事件系统实现怪物AI的状态机"><a href="#在Roblox中使用事件系统实现怪物AI的状态机" class="headerlink" title="在Roblox中使用事件系统实现怪物AI的状态机"></a>在Roblox中使用事件系统实现怪物AI的状态机</h2><p>首先，我们需要定义一个模型，用来存放怪物的数据。我们可以在模型中创建一些事件，用来储存怪物的状态。例如，我们可以定义一个“Patrol”事件，表示怪物巡逻的状态。</p>
<p>我们可以在怪物的Script脚本中，通过调用事件的fire方法，来实现状态的切换。例如，当怪物遇到玩家时，我们可以调用“Attack”事件的fire方法，来让怪物从巡逻状态切换到攻击状态。</p>
<h1 id="事件系统"><a href="#事件系统" class="headerlink" title="事件系统"></a>事件系统</h1><p>在Roblox Studio中，选择”Insert”菜单，在下拉菜单中选择”Object”并选择”Script”，新建一个脚本并在其中添加以下代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> event = Instance.new(<span class="string">&quot;RemoteEvent&quot;</span>)</span><br><span class="line">event.Name = <span class="string">&quot;myEvent&quot;</span></span><br><span class="line">event.Parent = game</span><br></pre></td></tr></table></figure>

<p>这样就可以创建一个名为”myEvent”的事件，并将其附加到游戏中。可以通过触发此事件来执行相应的代码逻辑。</p>
<p>举个例子，如果想要在玩家进入某个区域时触发这个事件，可以在区域的脚本中添加以下代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> event = game:GetService(<span class="string">&quot;ReplicatedStorage&quot;</span>).myEvent</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onPlayerEnter</span><span class="params">(player)</span></span></span><br><span class="line">  event:Fire(player)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">region.Enter:Connect(onPlayerEnter)</span><br></pre></td></tr></table></figure>

<p>上面的代码中，当玩家进入region区域时，会触发onPlayerEnter函数，在这个函数中调用event:Fire(player)方法，以此来触发myEvent事件。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 假设这里有一个叫做 &quot;myEvent&quot; 的事件</span></span><br><span class="line"><span class="keyword">local</span> myEvent = Instance.new(<span class="string">&quot;BindableEvent&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 假设我们想要在游戏中某个地方监听 &quot;myEvent&quot; 事件</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onMyEvent</span><span class="params">(...)</span></span></span><br><span class="line">    <span class="comment">-- 这里是事件处理函数，在 &quot;myEvent&quot; 事件发生时会被执行</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">myEvent.Event:Connect(onMyEvent)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 当游戏中的某个事件发生时，可以使用 fire 方法通知监听器</span></span><br><span class="line">myEvent:Fire(...)re(<span class="string">&quot;pistol&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>通过这种方式，可以利用事件系统来实现怪物AI的状态机。例如，可以在怪物的脚本中添加以下代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> event = game:GetService(<span class="string">&quot;ReplicatedStorage&quot;</span>).myEvent</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onStateChanged</span><span class="params">(newState)</span></span></span><br><span class="line">  <span class="keyword">if</span> newState == <span class="string">&quot;idle&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- 怪物处于idle状态，执行相应的代码逻辑</span></span><br><span class="line">  <span class="keyword">elseif</span></span><br></pre></td></tr></table></figure>

<h1 id="实现怪物AI的状态机"><a href="#实现怪物AI的状态机" class="headerlink" title="实现怪物AI的状态机"></a>实现怪物AI的状态机</h1><ol>
<li><p>在Roblox Studio中创建一个脚本作为状态机的管理器，并定义需要的状态</p>
</li>
<li><p>创建一个怪物模型，并在怪物模型中添加一个脚本作为怪物的行为控制器</p>
</li>
<li><p>在怪物的行为控制器中监听状态机管理器发出的状态变化事件，并根据不同的状态执行不同的行为</p>
</li>
<li><p>在状态机管理器中根据怪物的行为状态来发出状态变化事件，控制怪物的行为</p>
</li>
</ol>
<p>这样就可以通过事件系统来实现怪物AI的状态机。</p>
<h2 id="AnimationController"><a href="#AnimationController" class="headerlink" title="AnimationController"></a>AnimationController</h2><p>AnimationController是一个动画控制器，可以用它来控制角色的动画播放。Animator是一个动画状态机，它允许你使用状态机的方式来控制角色的动画状态。 AnimationController和Animator的区别在于，AnimationController更适合控制单个动画的播放，而Animator更适合处理多个动画之间的转换。</p>
<h2 id="使用Animator播放动画"><a href="#使用Animator播放动画" class="headerlink" title="使用Animator播放动画"></a>使用Animator播放动画</h2><p>是负责动画播放和复制的主要类。所有播放<code>AnimationTracks</code>的复制都通过Animator实例处理。</p>
<p>当在<code>Humanoid</code>或<code>AnimationController</code>下调用<code>Humanoid:LoadAnimation()</code>或<code>AnimationController:LoadAnimation()</code>时，会创建<code>Animator</code>。</p>
<p>为了正常复制动画，<code>Animator</code>必须首先在服务器上创建。</p>
<p>如果<code>Animator</code>是玩家角色中<code>Humanoid</code>或<code>AnimationController</code>的后代，那么玩家客户端上开始的动画将复制到服务器和其他客户端。</p>
<p>如果<code>Animator</code>不是玩家角色的后代，则必须在服务器上加载和启动它的动画才能复制</p>
<p><code>Animator</code>对象必须最初在服务器上创建并复制到客户端，才能复制动画。如果在本地创建<code>Animator</code>，则使用该<code>Animator</code>加载的<code>AnimationTracks</code>将不会复制。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">playAnimationFromServer</span><span class="params">(character, animation)</span></span></span><br><span class="line">    <span class="keyword">local</span> humanoid = character:FindFirstChildOfClass(<span class="string">&quot;Humanoid&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> humanoid <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- need to use animation object for server access</span></span><br><span class="line">        <span class="keyword">local</span> animator = humanoid:FindFirstChildOfClass(<span class="string">&quot;Animator&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> animator <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">local</span> animationTrack = animator:LoadAnimation(animation)</span><br><span class="line">            animationTrack:Play()</span><br><span class="line">            <span class="keyword">return</span> animationTrack</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> animation = Instance.new(<span class="string">&quot;Animation&quot;</span>)</span><br><span class="line">animation.AnimationId = <span class="string">&quot;rbxassetid://507765644&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> character = script.Parent</span><br><span class="line"></span><br><span class="line">playAnimationFromServer(character, animation)</span><br></pre></td></tr></table></figure>

<p>放置在StarterPlayerScripts中的<code>LocalScript</code>将动画ID为“rbxassetid:&#x2F;&#x2F;2515090838”的动画加载到玩家角色上并播放。</p>
<p>这里为啥用<code>LocalScript</code>？因为控制单一玩家的动画，如果是想控制全部玩家的动画，就使用<code>Script</code></p>
<p>以下的<code>GetMarkerReachedSignal()</code>方法来检测何时可以播放动画。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> Players = game:GetService(<span class="string">&quot;Players&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> player = Players.LocalPlayer</span><br><span class="line"><span class="keyword">local</span> character = player.Character</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> character <span class="keyword">or</span> <span class="keyword">not</span> character.Parent <span class="keyword">then</span></span><br><span class="line">    character = player.CharacterAdded:Wait()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Ensure that the character&#x27;s humanoid contains an &quot;Animator&quot; object</span></span><br><span class="line"><span class="keyword">local</span> humanoid = character:WaitForChild(<span class="string">&quot;Humanoid&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> animator = humanoid:WaitForChild(<span class="string">&quot;Animator&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Create a new &quot;Animation&quot; instance and assign an animation asset ID</span></span><br><span class="line"><span class="keyword">local</span> kickAnimation = Instance.new(<span class="string">&quot;Animation&quot;</span>)</span><br><span class="line">kickAnimation.AnimationId = <span class="string">&quot;rbxassetid://2515090838&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Load the animation onto the animator</span></span><br><span class="line"><span class="keyword">local</span> kickAnimationTrack = animator:LoadAnimation(kickAnimation)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Play the animation track</span></span><br><span class="line">kickAnimationTrack:Play()</span><br><span class="line"></span><br><span class="line"><span class="comment">-- If a named event was defined for the animation, connect it to &quot;GetMarkerReachedSignal()&quot;</span></span><br><span class="line">kickAnimationTrack:GetMarkerReachedSignal(<span class="string">&quot;KickEnd&quot;</span>):Connect(<span class="function"><span class="keyword">function</span><span class="params">(paramString)</span></span></span><br><span class="line">    <span class="built_in">print</span>(paramString)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-UI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-UI/" class="post-title-link" itemprop="url">Roblox-UI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:25:58 / 修改时间：14:28:14" itemprop="dateCreated datePublished" datetime="2022-12-18T14:25:58+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="UI"><a href="#UI" class="headerlink" title="UI"></a><a target="_blank" rel="noopener" href="https://create.roblox.com/docs/tutorials/building/ui/creating-a-score-bar">UI</a></h1><h2 id="静态UI"><a href="#静态UI" class="headerlink" title="静态UI"></a>静态UI</h2><h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><h4 id="StartGUI"><a href="#StartGUI" class="headerlink" title="StartGUI"></a>StartGUI</h4><p>这个东西存在于默认的项目管理器中，可以把它当成一个文件夹，用于存储所有 的UI界面</p>
<h4 id="ScreenGui"><a href="#ScreenGui" class="headerlink" title="ScreenGui"></a>ScreenGui</h4><p>这东西相当于UE中的控件蓝图，是一个个独立的UI，在<code>ScreenGui</code>里面可以添加各种各样的组件，比如<code>Frame</code>，<code>ImageButton</code>之类的</p>
<h4 id="Frame"><a href="#Frame" class="headerlink" title="Frame"></a>Frame</h4><p><code>ScreenGui</code>中的组件，相当于一个框架，里面可以塞进一些各种各样的小组件，原则上是将相同作用的组件放到同一个<code>Frame</code>里，方便进行总体控制嘛，总体控制是啥，我猜测是可视性这方面的</p>
<h4 id="UIListLayout"><a href="#UIListLayout" class="headerlink" title="UIListLayout"></a>UIListLayout</h4><p>横向排列的列表，虚幻里面也有，字面意思，放在里面的组件全部会按顺序横向排列，相应的，还有纵向排列的列表</p>
<p>值得注意的是，放在<code>UIListLayout</code>组件中的组件会存在一个属性<code>LayoutOrder</code>，通过修改这个属性，可以让<code>UIListLayout</code>中的组件按顺序排列</p>
<p><code>LayoutOrder</code>从1开始（不从0）</p>
<h4 id="UISizeConstraint"><a href="#UISizeConstraint" class="headerlink" title="UISizeConstraint"></a>UISizeConstraint</h4><p>这个东西存在的意义是：游戏适配PC，移动，各种屏幕的大小的时候会进行比例缩放，有时候在PC端UI很OK，但是在移动端就不对劲了。</p>
<p><code>UISizeConstraint</code>的<code>MaxSize</code>以及<code>MinSize</code>就是限制其最大Size和最小Size的</p>
<p>这玩意咋用？</p>
<p>点加号，给要限制大小的UI添加一个就行了（注意子类父类关系）</p>
<h4 id="AnchorPoint"><a href="#AnchorPoint" class="headerlink" title="AnchorPoint"></a>AnchorPoint</h4><p>锚点，我目前理解为和虚幻中的一样，就是在屏幕缩小或者放大的时候往锚点的位置靠拢（如有误，请后来者指正）</p>
<h4 id="制作一个静态UI"><a href="#制作一个静态UI" class="headerlink" title="制作一个静态UI"></a>制作一个静态UI</h4><p>这感觉没啥好说的，就是摆组件的事情，就不做赘述</p>
<h2 id="交互式UI"><a href="#交互式UI" class="headerlink" title="交互式UI"></a>交互式UI</h2><p>实现一个可点击的按钮，点击之后<code>Print</code>一串字符串</p>
<h2 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h2><h3 id="绑定UI点击事件到脚本"><a href="#绑定UI点击事件到脚本" class="headerlink" title="绑定UI点击事件到脚本"></a>绑定UI点击事件到脚本</h3><p>创建好一个Button之后，在Button下面创建一个<code>LocalScript</code>，记住！一定要是<code>LocalScript</code>，后面我会找一下几种<code>Script</code>的区别</p>
<h2 id="大致步骤"><a href="#大致步骤" class="headerlink" title="大致步骤"></a>大致步骤</h2><ol>
<li><p>在<code>StarterGui</code>下创建一个新的<code>ScreenGui</code>，命名为<code>MapScreenGui</code></p>
</li>
<li><p>在<code>MapScreenGui</code>下创建一个<code>Button</code>（随便啥Button）</p>
</li>
<li><p>给<code>Button</code>放在合适的位置，添加<code>UISizeConstraint</code></p>
</li>
<li><p>给<code>Button</code>添加一个<code>LocalScript</code>，编辑脚本，脚本内容如下</p>
</li>
</ol>
<h2 id="脚本内容"><a href="#脚本内容" class="headerlink" title="脚本内容"></a>脚本内容</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--Button是这个脚本的父类</span></span><br><span class="line"><span class="keyword">local</span> Button=script.Parent</span><br><span class="line"></span><br><span class="line"><span class="comment">--代理函数逻辑</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">OnButtonActivated</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Button activated!&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--Button.Activated:Connect(函数名)绑定代理</span></span><br><span class="line">Button.Activated:Connect(OnButtonActivated)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-Tick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-Tick/" class="post-title-link" itemprop="url">Roblox-Tick</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:24:43 / 修改时间：14:25:26" itemprop="dateCreated datePublished" datetime="2022-12-18T14:24:43+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Tick-与RunService-Heartbeat"><a href="#Tick-与RunService-Heartbeat" class="headerlink" title="Tick()与RunService:Heartbeat"></a>Tick()与RunService:Heartbeat</h1><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>tick() 函数主要用于获取当前的游戏时间，或者在游戏中计算时间间隔或限制操作的执行频率。</p>
<p>这和虚幻中的Tick差距有些大，所以需要注意</p>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="输出当前的游戏时间："><a href="#输出当前的游戏时间：" class="headerlink" title="输出当前的游戏时间："></a>输出当前的游戏时间：</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(tick())</span><br></pre></td></tr></table></figure>

<h3 id="计算游戏中的时间间隔"><a href="#计算游戏中的时间间隔" class="headerlink" title="计算游戏中的时间间隔"></a>计算游戏中的时间间隔</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> startTime = tick()</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Do something here</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> elapsedTime = tick() - startTime</span><br></pre></td></tr></table></figure>

<h3 id="限制某个操作的执行频率"><a href="#限制某个操作的执行频率" class="headerlink" title="限制某个操作的执行频率"></a>限制某个操作的执行频率</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> lastPrintTime = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> tick() - lastPrintTime &gt;= <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">        lastPrintTime = tick()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h1 id="RunService-Heartbeat-事件"><a href="#RunService-Heartbeat-事件" class="headerlink" title="RunService:Heartbeat 事件"></a>RunService:Heartbeat 事件</h1><p>在 Roblox 中每帧执行某个操作，则可以使用 RunService:Heartbeat 事件</p>
<p>这就是和虚幻中的Tick相同作用的东西</p>
<p>Heartbeat 事件在每帧都会触发，并传递当前的游戏时间作为参数</p>
<h2 id="每帧执行打印操作"><a href="#每帧执行打印操作" class="headerlink" title="每帧执行打印操作"></a>每帧执行打印操作</h2><p>例如，以下代码可以在每帧执行打印操作：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> runService = game:GetService(<span class="string">&quot;RunService&quot;</span>)</span><br><span class="line"></span><br><span class="line">runService.Heartbeat:Connect(<span class="function"><span class="keyword">function</span><span class="params">(time)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">time</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们首先获取了游戏的 RunService 服务，并使用 Heartbeat 事件的 Connect 方法来连接到 Heartbeat 事件。当 Heartbeat 事件触发时，我们的回调函数就会执行，并打印当前的游戏时间。</p>
<p>此外，还可以使用 Heartbeat 事件来计算帧率或游戏中的每帧操作时间间隔。</p>
<h2 id="计算游戏的帧率"><a href="#计算游戏的帧率" class="headerlink" title="计算游戏的帧率"></a>计算游戏的帧率</h2><p>下面是一个计算帧率的简单示例：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> runService = game:GetService(<span class="string">&quot;RunService&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> lastFrameTime = <span class="number">0</span></span><br><span class="line"><span class="keyword">local</span> totalFrames = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">runService.Heartbeat:Connect(<span class="function"><span class="keyword">function</span><span class="params">(time)</span></span></span><br><span class="line">    totalFrames = totalFrames + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">time</span> - lastFrameTime &gt;= <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">        lastFrameTime = <span class="built_in">time</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">local</span> fps = totalFrames</span><br><span class="line">        totalFrames = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(fps)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们首先获取了游戏的 RunService 服务，并使用 Heartbeat 事件的 Connect 方法来连接到 Heartbeat 事件。当 Heartbeat 事件触发时，我们的回调函数就会执行。</p>
<p>每次执行回调函数时，我们都会将总帧数增加 1。如果当前的游戏时间与上一次打印帧率的时间差超过了 1 秒，则我们就会打印当前的帧率。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-Ray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-Ray/" class="post-title-link" itemprop="url">Roblox-Ray</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:22:45 / 修改时间：14:23:32" itemprop="dateCreated datePublished" datetime="2022-12-18T14:22:45+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Ray"><a href="#Ray" class="headerlink" title="Ray"></a>Ray</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>Roblox 引擎中的 Ray 对象表示一条射线。它由两个分量（起点和方向）组成，分别表示射线的起点和方向。</p>
<p>射线是一条无限长的线段，它由一个起点和一个方向向量组成。射线可以用于表示光线或碰撞检测等场景中的线段。</p>
<p>Ray 对象可以通过 Ray.new() 函数创建。它接受两个参数：射线的起点和方向。起点是一个 Vector3 对象，表示三维坐标系中的点。方向是一个 Vector3 对象，表示射线的方向。</p>
<p>例如，以下代码创建了一条射线，它的起点为 (0, 0, 0) ，方向为 (1, 0, 0) 。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ray = Ray.new(Vector3.new(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), Vector3.new(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<h2 id="用Ray实现射线检测"><a href="#用Ray实现射线检测" class="headerlink" title="用Ray实现射线检测"></a>用Ray实现射线检测</h2><p>在 Roblox 引擎中，可以使用 Workspace:FindPartOnRayWithIgnoreList() 方法来实现射线检测。该方法接受一条 Ray 对象作为参数，并返回射线扫描到的第一个 Part 对象。如果射线没有碰到任何物体，则该方法会返回 nil 。</p>
<h3 id="Workspace-FindPartOnRayWithIgnoreList"><a href="#Workspace-FindPartOnRayWithIgnoreList" class="headerlink" title="Workspace:FindPartOnRayWithIgnoreList()"></a>Workspace:FindPartOnRayWithIgnoreList()</h3><p>Workspace:FindPartOnRayWithIgnoreList() 是 Roblox 引擎中的一个方法，用于在工作空间中查找第一个与射线相交的 Part 对象。该方法接受以下参数：</p>
<ul>
<li>Ray 对象：表示射线的路径。</li>
<li>忽略列表：表示忽略的实例列表。射线扫描时会自动忽略这些实例。</li>
<li>是否可碰撞：表示射线是否与可碰撞物体相交。如果为 true，则射线只能与可碰撞物体相交。如果为 false，则射线不能与可碰撞物体相交。</li>
<li>是否不可碰撞：表示射线是否与不可碰撞物体相交。如果为 true，则射线只能与不可碰撞物体相交。如果为 false，则射线不能与不可碰撞物体相交。</li>
</ul>
<p>该方法返回值是射线扫描到的第一个与射线相交的 Part 对象。如果射线没有碰到任何物体，则该方法会返回 nil。</p>
<p>例如，以下代码实现了射击效果，如果射线碰到了一个物体，则会创建一个激光束特效：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ray = Ray.new(</span><br><span class="line">    maid.humanoidRootPart.Position,</span><br><span class="line">    maid.humanoidRootPart.CFrame.lookVector</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> part = Workspace:FindPartOnRayWithIgnoreList(ray, &#123;</span><br><span class="line">    maid.instance,</span><br><span class="line">&#125;, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> part <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> laser = Instance.new(<span class="string">&quot;Part&quot;</span>)</span><br><span class="line">    laser.Name = <span class="string">&quot;Laser&quot;</span></span><br><span class="line">    laser.BrickColor = BrickColor.new(<span class="string">&quot;Bright red&quot;</span>)</span><br><span class="line">    laser.Anchored = <span class="literal">true</span></span><br><span class="line">    laser.CanCollide = <span class="literal">false</span></span><br><span class="line">    laser.Size = Vector3.new(<span class="number">0.2</span>, <span class="number">0.2</span>, (part.Position - maid.humanoidRootPart.Position).Magnitude)</span><br><span class="line">    laser.CFrame = CFrame.new(</span><br><span class="line">        maid.humanoidRootPart.Position,</span><br><span class="line">        part.Position</span><br><span class="line">    )</span><br><span class="line">    laser.Parent = Workspace</span><br><span class="line"></span><br><span class="line">    wait(<span class="number">0.2</span>)</span><br><span class="line">    laser:Destroy()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>例如，以下代码使用射线检测来判断两个实例之间是否存在障碍物：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ray = Ray.new(</span><br><span class="line">    maid.humanoidRootPart.Position,</span><br><span class="line">    (targetInstance.Parent.HumanoidRootPart.Position - maid.humanoidRootPart.Position).Unit * distance</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> part = Workspace:FindPartOnRayWithIgnoreList(ray, &#123;</span><br><span class="line">    targetInstance.Parent, maid.instance,</span><br><span class="line">&#125;, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> part <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- 如果 part 为 nil，说明没有障碍物</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="用Ray实现视线跟踪"><a href="#用Ray实现视线跟踪" class="headerlink" title="用Ray实现视线跟踪"></a>用Ray实现视线跟踪</h2><p>视线跟踪是指使用射线来检测视线所看到的物体。</p>
<p>在 Roblox 引擎中，可以使用 <code>Workspace:FindPartOnRayWithIgnoreList()</code> 方法来实现视线跟踪。该方法接受一条 Ray 对象作为参数，并返回射线扫描到的第一个 Part 对象。如果射线没有碰到任何物体，则该方法会返回 nil 。</p>
<p>例如，以下代码使用视线跟踪来检测玩家所看到的物体：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ray = Ray.new(</span><br><span class="line">    maid.humanoidRootPart.Position,</span><br><span class="line">    maid.humanoidRootPart.CFrame.lookVector</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> part = Workspace:FindPartOnRayWithIgnoreList(ray, &#123;</span><br><span class="line">    maid.instance,</span><br><span class="line">&#125;, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> part <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- 如果 part 不为 nil，说明视线扫描到了一个物体</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="用Ray实现范围伤害"><a href="#用Ray实现范围伤害" class="headerlink" title="用Ray实现范围伤害"></a>用Ray实现范围伤害</h2><p>在 Roblox 引擎中，可以使用 Ray 对象和 Workspace:FindPartOnRayWithIgnoreList() 方法来实现范围伤害。</p>
<p>首先，需要定义一个范围值，表示伤害范围的半径。例如，定义一个叫做 ATTACK_RADIUS 的变量，表示伤害范围为 10 个单位。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ATTACK_RADIUS = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>然后，需要遍历范围内的每个实例，并判断它们是否在伤害范围之内。可以使用 CollectionService:GetTagged() 方法来获取所有被指定标签所标记的实例。然后遍历这些实例，并判断它们是否在伤害范围之内。</p>
<p>例如，以下代码使用范围伤害来攻击所有被标记为 “Enemy” 的实例：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> enemies = CollectionService:GetTagged(<span class="string">&quot;Enemy&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, enemy <span class="keyword">in</span> <span class="built_in">ipairs</span>(enemies) <span class="keyword">do</span></span><br><span class="line">    <span class="comment">-- 计算实例与攻击者之间的距离</span></span><br><span class="line">    <span class="keyword">local</span> distance = (maid.humanoidRootPart.Position - enemy.Position).Magnitude</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 判断是否在伤害范围之内</span></span><br><span class="line">    <span class="keyword">if</span> distance &lt;= ATTACK_RADIUS <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- 创建一条射线</span></span><br><span class="line">        <span class="keyword">local</span> ray = Ray.new(</span><br><span class="line">            maid.humanoidRootPart.Position,</span><br><span class="line">            (enemy.Position - maid.humanoidRootPart.Position).Unit * distance</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 检测是否有障碍物</span></span><br><span class="line">        <span class="keyword">local</span> part = Workspace:FindPartOnRayWithIgnoreList(ray, &#123;</span><br><span class="line">            maid.instance,</span><br><span class="line">        &#125;, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 如果没有障碍物，则对实例造成伤害</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> part <span class="keyword">then</span></span><br><span class="line">            <span class="comment">-- 计算伤害值</span></span><br><span class="line">            <span class="keyword">local</span> damage = <span class="built_in">math</span>.<span class="built_in">max</span>(<span class="number">0</span>, <span class="number">100</span> - distance)</span><br><span class="line"></span><br><span class="line">            <span class="comment">-- 造成伤害</span></span><br><span class="line">            enemy.Health = enemy.Health - damage</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Ray实现射击效果"><a href="#Ray实现射击效果" class="headerlink" title="Ray实现射击效果"></a>Ray实现射击效果</h2><p>首先，需要定义一个射线，表示子弹的路径。可以使用 Ray.new() 方法来创建一条射线。例如，以下代码定义了一条射线，表示子弹从枪口发射出去：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ray = Ray.new(</span><br><span class="line">    maid.humanoidRootPart.Position,</span><br><span class="line">    maid.humanoidRootPart.CFrame.lookVector</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>然后，需要使用 Workspace:FindPartOnRayWithIgnoreList() 方法来执行射击。该方法接受一条 Ray 对象作为参数，并返回射线扫描到的第一个 Part 对象。如果射线没有碰到任何物体，则该方法会返回 nil 。</p>
<p>例如，以下代码实现了射击效果，如果射线碰到了一个物体，则会创建一个激光束特效：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> ray = Ray.new(</span><br><span class="line">    maid.humanoidRootPart.Position,</span><br><span class="line">    maid.humanoidRootPart.CFrame.lookVector</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> part = Workspace:FindPartOnRayWithIgnoreList(ray, &#123;</span><br><span class="line">    maid.instance,</span><br><span class="line">&#125;, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> part <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> laser = Instance.new(<span class="string">&quot;Part&quot;</span>)</span><br><span class="line">    laser.Name = <span class="string">&quot;Laser&quot;</span></span><br><span class="line">    laser.BrickColor = BrickColor.new(<span class="string">&quot;Bright red&quot;</span>)</span><br><span class="line">    laser.Anchored = <span class="literal">true</span></span><br><span class="line">    laser.CanCollide = <span class="literal">false</span></span><br><span class="line">    laser.Size = Vector3.new(<span class="number">0.2</span>, <span class="number">0.2</span>, (part.Position - maid.humanoidRootPart.Position).Magnitude)</span><br><span class="line">    laser.CFrame = CFrame.new(</span><br><span class="line">        maid.humanoidRootPart.Position,</span><br><span class="line">        part.Position</span><br><span class="line">    )</span><br><span class="line">    laser.Parent = Workspace</span><br><span class="line"></span><br><span class="line">    wait(<span class="number">0.2</span>)</span><br><span class="line">    laser:Destroy()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-HingedDoor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-HingedDoor/" class="post-title-link" itemprop="url">Roblox-HingedDoor</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:21:17 / 修改时间：14:22:13" itemprop="dateCreated datePublished" datetime="2022-12-18T14:21:17+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="通过铰链实现旋转门"><a href="#通过铰链实现旋转门" class="headerlink" title="通过铰链实现旋转门"></a>通过铰链实现旋转门</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="Anchored"><a href="#Anchored" class="headerlink" title="Anchored"></a>Anchored</h3><p>这是一些<code>部件</code>的默认属性，此值为true，则此<code>部件</code>就不会移动</p>
<p>就理解为无敌重，重到玩家推不动</p>
<h4 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h4><p>选择某个部件-&gt;属性管理器-&gt;<code>Data</code>-&gt;<code>Aechivable</code></p>
<h3 id="Attachment"><a href="#Attachment" class="headerlink" title="Attachment"></a>Attachment</h3><p>部件的组件，可以让这个部件围绕着这个组件进行旋转</p>
<p>注意：想要看到这个<code>Attachment</code>，就必须打开该部件的<code>约束详情</code></p>
<h4 id="约束详情位置"><a href="#约束详情位置" class="headerlink" title="约束详情位置"></a>约束详情位置</h4><p>模型-&gt;约束-&gt;约束详情</p>
<h4 id="Attachment的旋转轴"><a href="#Attachment的旋转轴" class="headerlink" title="Attachment的旋转轴"></a>Attachment的旋转轴</h4><p>打开<code>约束详情</code>之后，凑近看<code>Attachment</code>，则可以看到为一个球形，带俩轴，一个<code>黄色</code>，一个<code>橙色</code></p>
<p>我们会一直围绕黄色的轴旋转</p>
<p>橙色的轴，应该是配合后面的<code>HingeConstraint</code>来限制旋转角度的方向</p>
<ul>
<li>也就是说，不会出现在墙里旋转的情况</li>
</ul>
<h3 id="HingeConstraint"><a href="#HingeConstraint" class="headerlink" title="HingeConstraint"></a>HingeConstraint</h3><p>部件的组件，将两个<code>Attachment</code>添加到<code>Attachments</code>属性栏中进行组合，实现约束旋转角度的效果</p>
<h2 id="大致步骤"><a href="#大致步骤" class="headerlink" title="大致步骤"></a>大致步骤</h2><ol>
<li><p>创建两个部件，分别作为<code>Door</code>和<code>DoorFrame</code></p>
</li>
<li><p>给<code>DoorFrame</code>的属性<code>Aechivable</code>设置为<code>true</code></p>
</li>
<li><p>分别给<code>Door</code>和<code>DoorFrame</code>添加组件<code>Attachment</code>，分别命名为<code>DoorFrameAttachment</code>，<code>DoorAttachment</code></p>
</li>
<li><p>调整<code>DoorFrameAttachment</code>，<code>DoorAttachment</code>的黄色的轴向上，橙色的轴同时指向门框方向</p>
</li>
<li><p>给<code>DoorFrame</code>部件添加组件<code>HingeConstraint</code>，在其<code>Attachments</code>属性中分别添加<code>DoorFrameAttachment</code>，<code>DoorAttachment</code></p>
</li>
<li><p>调整<code>HingeConstraint</code>中的<code>Limits</code>栏中的<code>LowerAngle</code>和<code>UpperAngle</code>分别为-90和90</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-ConstomPlayer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-ConstomPlayer/" class="post-title-link" itemprop="url">Roblox-ConstomPlayer</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:19:49 / 修改时间：14:20:38" itemprop="dateCreated datePublished" datetime="2022-12-18T14:19:49+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="将自定义模型导入为玩家"><a href="#将自定义模型导入为玩家" class="headerlink" title="将自定义模型导入为玩家"></a>将自定义模型导入为玩家</h1><p>如果要将自定义模型导入到 Roblox Studio 中，并设置为玩家，需要注意以下几点：</p>
<ol>
<li>导入模型时，应确保模型的网格模型正确，无错误或缺失。</li>
<li>导入模型后，应给模型添加一个 Humanoid 子对象，用于控制玩家角色的行为。</li>
<li>在模型上添加 Humanoid 后，应给 Humanoid 设置一个适当的高度，使玩家角色能够在游戏中正常移动。</li>
<li>在模型上添加 Humanoid 后，应添加一些动画，例如站立、行走、跑步等，使玩家角色能够在游戏中正常行动。</li>
<li>在模型上添加 Humanoid 后，应将该模型的 PrimaryPart 设置为 Humanoid 的 RootPart，使 Humanoid 的运动和动画能够正确反映在游戏中。</li>
<li>在模型上添加 Humanoid 后，应给模型添加一个 Camera 子对象，用于控制玩家视角。</li>
<li>在模型上添加 Camera 后，应将 Camera 的 FieldOfView 设置为一个适当的值，使玩家能够看到更多的游戏内容。</li>
<li>在模型上添加 Camera 后，应将 Camera 的 ViewportSize 设置为一个适当的值，使玩家能够清晰地看到游戏内容。</li>
<li>在模型上添加 Camera 后，应将 Camera 的 CameraType 设置为 Scriptable，以便在脚本中控制 Camera 的位置和方向。</li>
<li>在模型上添加 Camera 后，应给模型添加一个 PlayerGui 子对象，用于显示玩家界面。</li>
<li>在模型上添加 PlayerGui 后，应给 PlayerGui 添加一个 ScreenGui 子对象，用于显示文本、图像等 UI 元素。</li>
<li>在模型上添加 ScreenGui 后，应给 ScreenGui 添加合适的 UI 元素，例如文本、图像、按钮等，以提供给玩家使用。</li>
<li>最后，应在模型上添加一个绑定脚本，用于实现玩家的控制逻辑。例如，可以使用脚本控制玩家的移动、跳跃、攻击等行为，或处理玩家与游戏世界的交互。</li>
</ol>
<p>综上，要将自定义模型导入到 Roblox Studio 中，并设置为玩家主角，需要注意以上所有步骤，才能保证模型能够在游戏中正常工作。</p>
<h1 id="Humanoid的使用方法"><a href="#Humanoid的使用方法" class="headerlink" title="Humanoid的使用方法"></a>Humanoid的使用方法</h1><p>在 Roblox 中，Humanoid 是一个可以控制模型行为的子对象。例如，可以通过 Humanoid 来控制玩家角色的行走、跑步、跳跃、攻击等动作。</p>
<p>要在模型上使用 Humanoid，需要先在模型上添加一个 Humanoid 子对象。例如，可以在模型上右键单击，然后选择“插入”-&gt;“Humanoid”，即可在模型上添加一个 Humanoid。</p>
<p>接下来，可以通过脚本来控制 Humanoid。例如，可以通过 humanoid:MoveTo() 方法来移动玩家角色，通过 humanoid:Jump() 方法来让玩家角色跳跃，通过 humanoid:UnequipTools() 方法来让玩家角色放下手中的工具等。</p>
<p>还可以通过 Humanoid 的一些属性来控制玩家角色的状态。例如，可以通过 humanoid.Health 属性来获取玩家角色的血量，通过 humanoid.WalkSpeed 属性来获取或设置玩家角色的行走速度，通过 humanoid.CameraOffset 属性来设置玩家角色的镜头偏移量等。</p>
<p>以下是一个使用 Humanoid 控制玩家角色的示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> characterModel = script.Parent</span><br><span class="line"><span class="keyword">local</span> humanoid = characterModel.Humanoid</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置玩家角色的行走速度</span></span><br><span class="line">humanoid.WalkSpeed = <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 监听玩家角色移动的输入</span></span><br><span class="line">characterModel.Humanoid.Changed:Connect(<span class="function"><span class="keyword">function</span><span class="params">(property)</span></span></span><br><span class="line">    <span class="keyword">if</span> property == <span class="string">&quot;MoveDirection&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- 计算玩家角色移动的方向和速度</span></span><br><span class="line">        <span class="keyword">local</span> moveDirection = characterModel.Humanoid.MoveDirection</span><br><span class="line">        <span class="keyword">local</span> moveSpeed = characterModel.Humanoid.WalkSpeed</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 根据移动方向和速度，更新玩家角色的位置</span></span><br><span class="line">        characterModel:Move(moveDirection * moveSpeed)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 监听玩家角色跳跃的输入</span></span><br><span class="line">characterModel.Humanoid.JumpRequest:Connect(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- 让玩家角色跳跃</span></span><br><span class="line">    characterModel.Humanoid:Jump()</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 监听玩家角色攻击的输入</span></span><br><span class="line">characterModel.Humanoid.AttackRequest:Connect(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- 让玩家角色攻击</span></span><br><span class="line">    characterModel.Humanoid:UnequipTools()</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们通过 Humanoid 的 Changed 和 JumpRequest、AttackRequest 等事件，来监听玩家角色的输入，并根据输入执行对应的行为。</p>
<p>例如，当玩家角色移动时，我们通过监听 Humanoid.Changed 事件，来获取玩家角色的移动方向和速度，然后使用 characterModel:Move() 方法来更新玩家角色的位置。</p>
<p>当玩家角色按下跳跃键时，我们通过监听 Humanoid.JumpRequest 事件，来调用 humanoid:Jump() 方法，让玩家角色进行跳跃。</p>
<p>当玩家角色按下攻击键时，我们通过监听 Humanoid.AttackRequest 事件，来调用 humanoid:UnequipTools() 方法，让玩家角色放下手中的工具。</p>
<p>通过这样的方式，我们就能够使用 Humanoid 来控制玩家角色的行为，并实现玩家与游戏世界的交互。</p>
<h2 id="通过脚本控制玩家的Humanoid"><a href="#通过脚本控制玩家的Humanoid" class="headerlink" title="通过脚本控制玩家的Humanoid"></a>通过脚本控制玩家的Humanoid</h2><p>通常情况下，想要通过脚本控制玩家的 Humanoid，此脚本应该放在模型上的 LocalScript 中。</p>
<p>在 Roblox 中，模型上的 LocalScript 是针对每个玩家实例单独执行的脚本。即，每个玩家都会在模型上拥有一份脚本的副本，并在本地执行此脚本。</p>
<p>因此，如果将脚本放在模型上的 LocalScript 中，每个玩家都会拥有一份脚本的副本，并在本地执行此脚本。这样，我们就能够通过脚本来控制每个玩家的 Humanoid，从而实现游戏中玩家的控制逻辑。</p>
<p>例如，我们可以通过以下方式来添加一个控制玩家 Humanoid 的脚本：</p>
<ol>
<li><p>首先，在模型上右键单击，然后选择“插入”-&gt;“LocalScript”，即可在模型上添加一个 LocalScript。</p>
</li>
<li><p>然后，可以在 LocalScript 中编写控制玩家 Humanoid 的代码，例如上面给出的示例代码。</p>
</li>
<li><p>最后，可以将 LocalScript 放置在模型上的任何地方，然后点击“播放”按钮，即可运行脚本。在运行过程中，每个玩家都会在本地执行脚本，从而控制自己的 Humanoid。</p>
</li>
</ol>
<p>需要注意的是，在 Roblox 中，每个玩家都会拥有一个叫做 Player 模型的预制物。Player 模型是一个特殊的模型，它与玩家相关联，包含了玩家的头像、名字、角色模型等信息。如果要通过脚本控制玩家的 Humanoid，需要在 Player 模型上添加 LocalScript。</p>
<p>因此，在实际的开发过程中，我们通常会在 Player 模型上添加 LocalScript，并在 LocalScript 中编写控制玩家 Humanoid 的代码。这样，我们就能够通过脚本来控制每个玩家的 Humanoid，从而实现游戏中玩家的控制逻辑。</p>
<h2 id="自定义模型导入到游戏中，作为玩家模型并且实现以下效果"><a href="#自定义模型导入到游戏中，作为玩家模型并且实现以下效果" class="headerlink" title="自定义模型导入到游戏中，作为玩家模型并且实现以下效果"></a>自定义模型导入到游戏中，作为玩家模型并且实现以下效果</h2><p>将自定义模型导入到游戏中，作为玩家的模型，我想要通过脚本控制这个自定义模型实现以下效果<br>1.移动并且播放移动动画<br>2.跳跃并且播放跳跃动画<br>3.近战攻击并且播放攻击动画<br>4.近战攻击伤害数值为40点<br>想要达到上述效果，如何通过脚本控制Humanoid以及播放动画，并且如何设置近战伤害的伤害数值？</p>
<h3 id="答"><a href="#答" class="headerlink" title="答"></a>答</h3><p>为了实现上述效果，我们可以通过以下步骤来通过脚本控制自定义模型的 Humanoid：</p>
<ol>
<li><p>首先，将自定义模型导入到 Roblox Studio 中，并将其作为玩家的模型。</p>
</li>
<li><p>然后，在自定义模型上添加一个 LocalScript，用于控制自定义模型的 Humanoid。</p>
</li>
<li><p>在 LocalScript 中，通过以下代码获取自定义模型的 Humanoid 实例：</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> characterModel = script.Parent</span><br><span class="line"><span class="keyword">local</span> humanoid = characterModel.Humanoid</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>然后，通过监听 Humanoid.Changed 事件，来控制自定义模型的移动。例如，可以使用以下代码来实现自定义模型的移动：</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">humanoid.Changed:Connect(<span class="function"><span class="keyword">function</span><span class="params">(property)</span></span></span><br><span class="line">    <span class="keyword">if</span> property == <span class="string">&quot;MoveDirection&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> moveDirection = humanoid.MoveDirection</span><br><span class="line">        <span class="keyword">if</span> moveD</span><br></pre></td></tr></table></figure>

<p>下面是完整的代码示例，可以实现自定义模型的移动、跳跃、近战攻击和伤害数值设置。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取自定义模型的 Humanoid 实例</span></span><br><span class="line"><span class="keyword">local</span> characterModel = script.Parent</span><br><span class="line"><span class="keyword">local</span> humanoid = characterModel.Humanoid</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置近战攻击伤害数值</span></span><br><span class="line">humanoid.MeleeDamage = <span class="number">40</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 监听 Humanoid.Changed 事件</span></span><br><span class="line">humanoid.Changed:Connect(<span class="function"><span class="keyword">function</span><span class="params">(property)</span></span></span><br><span class="line">    <span class="keyword">if</span> property == <span class="string">&quot;MoveDirection&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- 控制自定义模型的移动</span></span><br><span class="line">        <span class="keyword">local</span> moveDirection = humanoid.MoveDirection</span><br><span class="line">        <span class="keyword">if</span> moveDirection ~= Vector3.new(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">local</span> moveSpeed = <span class="number">10</span></span><br><span class="line">            <span class="keyword">local</span> newPosition = characterModel.PrimaryPart.Position + moveDirection.Unit * moveSpeed</span><br><span class="line">            humanoid:MoveTo(newPosition)</span><br><span class="line">            characterModel.HumanoidRootPart.CFrame = CFrame.new(newPosition)</span><br><span class="line"></span><br><span class="line">            <span class="comment">-- 播放移动动画</span></span><br><span class="line">            humanoid:ChangeState(<span class="string">&quot;Running&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">-- 播放站立动画</span></span><br><span class="line">            humanoid:ChangeState(<span class="string">&quot;Idle&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> property == <span class="string">&quot;Jump&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- 控制自定义模型的跳跃</span></span><br><span class="line">        <span class="keyword">if</span> humanoid.Jump <span class="keyword">then</span></span><br><span class="line">            humanoid:Jump()</span><br><span class="line"></span><br><span class="line">            <span class="comment">-- 播放跳跃动画</span></span><br><span class="line">            humanoid:ChangeState(<span class="string">&quot;Jumping&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> property == <span class="string">&quot;Attack&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- 控制自定义模型的近战攻击</span></span><br></pre></td></tr></table></figure>

<p>如果 humanoid.Attack 的值为 true，表示当前需要进行近战攻击。我们可以在这里实现攻击逻辑，并播放攻击动画。</p>
<p>例如，以下代码可以实现控制自定义模型的近战攻击：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 控制自定义模型的近战攻击</span></span><br><span class="line"><span class="keyword">if</span> humanoid.Attack <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- 播放近战攻击动画</span></span><br><span class="line">    humanoid:ChangeState(<span class="string">&quot;Attacking&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 在 0.5 秒后进行伤害计算</span></span><br><span class="line">    wait(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 计算伤害</span></span><br><span class="line">    <span class="keyword">local</span> meleeDamage = humanoid.MeleeDamage</span><br><span class="line">    <span class="keyword">local</span> humanoidRootPart = characterModel.HumanoidRootPart</span><br><span class="line">    <span class="keyword">local</span> hit, hitPos, hitNormal = workspace:FindPartOnRay(Ray.new(humanoidRootPart.Position, humanoidRootPart.CFrame.lookVector * <span class="number">10</span>), characterModel)</span><br><span class="line">    <span class="keyword">if</span> hit <span class="keyword">and</span> hit.Parent:FindFirstChild(<span class="string">&quot;Humanoid&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        hit.Parent.Humanoid:TakeDamage(meleeDamage)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>如果您在实际项目中使用上述代码，您可能需要进行一些修改和调试。例如，您可以通过以下步骤来确保代码正确运行：</p>
<ol>
<li><p>首先，确保您的自定义模型已经导入到 Roblox Studio 中，并且可以正常控制。</p>
</li>
<li><p>然后，将上述代码复制到您的 LocalScript 中，并进行相应的修改。例如，如果您需要修改自定义模型的移动速度，可以将 <code>moveSpeed</code> 的值改为您想要的数值。</p>
</li>
<li><p>接着，确保您的自定义模型中有相应的动画。例如，如果您的脚本中播放了 “Running”、”Jumping” 和 “Attacking” 动画，那么您的自定义模型中就应该包含这三种动画。</p>
</li>
</ol>
<h1 id="播放跑步动画"><a href="#播放跑步动画" class="headerlink" title="播放跑步动画"></a>播放跑步动画</h1><p>在Roblox中有一个跑步动画，想要通过脚本监控玩家键盘输入shift+w的时候播放此动画，如何通过AnimationController实现此功能</p>
<p>可以使用AnimationController来实现上述功能。在Roblox Studio中，首先创建一个新的脚本，然后添加以下代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> player = game.Players.LocalPlayer</span><br><span class="line"><span class="keyword">local</span> character = player.Character</span><br><span class="line"><span class="keyword">local</span> humanoid = character:WaitForChild(<span class="string">&quot;Humanoid&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> animationController = script:WaitForChild(<span class="string">&quot;AnimationController&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> runAnimation = animationController:WaitForChild(<span class="string">&quot;Run&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> isRunning = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onKeyPressed</span><span class="params">(inputObject, gameProcessedEvent)</span></span></span><br><span class="line">    <span class="keyword">if</span> inputObject.KeyCode == Enum.KeyCode.W <span class="keyword">and</span> gameProcessedEvent <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> isRunning <span class="keyword">then</span></span><br><span class="line">            humanoid:Stop()</span><br><span class="line">            isRunning = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            humanoid:Play()</span><br><span class="line">            isRunning = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">player.CharacterAdded:Connect(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    player.KeyDown:Connect(onKeyPressed)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们首先获取到了当前玩家（player）、玩家角色（character）和角色的Humanoid部件（humanoid）。接着，我们获取到了AnimationController和Run动画，然后定义了一个标志变量（isRunning）来表示当前是否在播放动画。</p>
<p>之后，我们创建了一个函数（onKeyPressed），用来监听玩家的键盘输入。当玩家按下W键时，我们会检查当前是否正在播放动画，如果是，就停止动画；如果不是，就开始播放动画。</p>
<p>最后，我们还需要监听玩家加入游戏的事件，并在事件发生时连接到onKeyPressed函数，实现玩家键盘输入的监控。</p>
<p>需要注意的是，在实际使用时，需要将上面的代码</p>
<p>放置在角色模型的某个脚本中，例如StarterPlayerScripts。在添加完代码后，需要将此脚本放置在角色模型的工作区中。</p>
<p>当玩家加入游戏后，只需要按下shift+w键，就可以播放动画了。</p>
<p>当然，上面的代码仅供参考，您可以根据自己的需要进行修改和完善。例如，您可以使用isRunning标志来判断是否处于跑步状态，然后再根据需要播放不同的动画。</p>
<p>此外，您也可以使用Roblox的事件机制来实现更复杂的动画播放逻辑。例如，当玩家角色持续按下跑步键时，可以触发一个事件，以便进行相应的处理。</p>
<h2 id="事件监听"><a href="#事件监听" class="headerlink" title="事件监听"></a>事件监听</h2><p>下面是一个示例代码，它实现了玩家通过按shift+w键来控制跑步和攻击的功能，并使用脚本播放对应的动画：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> player = game.Players.LocalPlayer</span><br><span class="line"><span class="keyword">local</span> character = player.Character</span><br><span class="line"><span class="keyword">local</span> humanoid = character:WaitForChild(<span class="string">&quot;Humanoid&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> isRunning = <span class="literal">false</span></span><br><span class="line"><span class="keyword">local</span> isAttacking = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置按键监听</span></span><br><span class="line">player.KeyDown:Connect(<span class="function"><span class="keyword">function</span><span class="params">(key)</span></span></span><br><span class="line"><span class="keyword">if</span> key == <span class="string">&quot;W&quot;</span> <span class="keyword">and</span> isRunning == <span class="literal">false</span> <span class="keyword">then</span></span><br><span class="line"><span class="comment">-- 按下shift+w键，开始播放跑步动画</span></span><br><span class="line"><span class="keyword">local</span> runAnim = character:WaitForChild(<span class="string">&quot;RunAnim&quot;</span>)</span><br><span class="line">humanoid:LoadAnimation(runAnim)</span><br><span class="line">humanoid:Play()</span><br><span class="line">isRunning = <span class="literal">true</span></span><br><span class="line"><span class="keyword">elseif</span> key == <span class="string">&quot;W&quot;</span> <span class="keyword">and</span> isAttacking == <span class="literal">false</span> <span class="keyword">then</span></span><br><span class="line"><span class="comment">-- 按下shift+w键，开始播放攻击动画</span></span><br><span class="line"><span class="keyword">local</span> attackAnim = character:WaitForChild(<span class="string">&quot;AttackAnim&quot;</span>)</span><br><span class="line">humanoid:LoadAnimation(attackAnim)</span><br><span class="line">humanoid:Play()</span><br><span class="line">isAttacking = <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">player.KeyUp:Connect(<span class="function"><span class="keyword">function</span><span class="params">(key)</span></span></span><br><span class="line"><span class="keyword">if</span> key == <span class="string">&quot;W&quot;</span> <span class="keyword">then</span></span><br><span class="line"><span class="comment">-- 松开shift+w键，停止播放动画</span></span><br><span class="line">humanoid:Stop()</span><br><span class="line">isRunning = <span class="literal">false</span></span><br><span class="line">isAttacking = <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>

<p>humanoid:LoadAnimation()接口用于将动画数据加载到Humanoid对象中，这样它就可以播放动画了。如果只是调用humanoid:LoadAnimation()接口，而不调用humanoid:Play()接口，动画是不会播放的。在Roblox中，通常需要使用Humanoid:LoadAnimation()和Humanoid:Play()两个接口配合使用，才能真正播放动画。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/18/Roblox-CFrame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="williny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Williny'home">
      <meta itemprop="description" content="孤独是人生的常态">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Williny'home">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/18/Roblox-CFrame/" class="post-title-link" itemprop="url">Roblox-CFrame</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-12-18 14:17:14 / 修改时间：14:18:55" itemprop="dateCreated datePublished" datetime="2022-12-18T14:17:14+08:00">2022-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Roblox/" itemprop="url" rel="index"><span itemprop="name">Roblox</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="CFrame"><a href="#CFrame" class="headerlink" title="CFrame"></a>CFrame</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p><code>CFrame</code> 为Coordinate Frame（坐标框架）的缩写，是一种用于旋转和定位 3D 对象的数据类型。</p>
<p>人话：<code>CFrame</code>包含一个物体的<code>位置信息</code>以及<code>旋转信息</code></p>
<h2 id="世界坐标与相对坐标"><a href="#世界坐标与相对坐标" class="headerlink" title="世界坐标与相对坐标"></a>世界坐标与相对坐标</h2><p>在学习<code>CFrame</code>之前先需要搞明白<code>世界坐标</code>以及<code>相对坐标</code></p>
<ul>
<li><p><code>世界坐标</code>：以世界作为参照物，生成的一个坐标系</p>
</li>
<li><p><code>相对坐标</code>：以某个物体为参照物，生成的一个坐标系</p>
</li>
</ul>
<p>直接设置某物体的<code>CFrame</code>是对该物体的<code>世界坐标</code>进行操作；如果想要对其<code>相对坐标</code>进行操作，则需要额外的逻辑</p>
<p>比如，如果直接使用<code>CFrame</code>使物体A围绕Y轴旋转90°，在游戏的表现中，不是围绕物体A的Y轴旋转90°，而是围绕世界坐标的Y轴旋转90°</p>
<h2 id="创建CFrame"><a href="#创建CFrame" class="headerlink" title="创建CFrame"></a>创建CFrame</h2><ol>
<li><p>创建<code>CFrame</code>的位置信息-&gt;<code>new()</code></p>
</li>
<li><p>创建<code>CFrame</code>的旋转信息-&gt;<code>Angles()</code></p>
</li>
<li><p>设置某物体面向指定点</p>
</li>
<li><p>更新Actor位置</p>
</li>
</ol>
<h3 id="CFrame-new"><a href="#CFrame-new" class="headerlink" title="CFrame.new()"></a>CFrame.new()</h3><p>以下是对物体的位置信息进行操作</p>
<p>注意：在进行下面的所有操作之前，给需要操作的Actor的<code>锚固</code>属性打开</p>
<p><code>首页-&gt;编辑-&gt;锚固</code>或者<code>模型-&gt;部件-&gt;锚固</code></p>
<p>因为引擎所有物体是默认开启重力属性的</p>
<h4 id="直接给CFrame传入世界坐标值"><a href="#直接给CFrame传入世界坐标值" class="headerlink" title="直接给CFrame传入世界坐标值"></a>直接给CFrame传入世界坐标值</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--获取当前关卡中RedBlock的Actor</span></span><br><span class="line"><span class="comment">--不确定是否存在Actor这个概念，姑且先这样理解</span></span><br><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="comment">-- 创建新 CFrame</span></span><br><span class="line"><span class="keyword">local</span> newCFrame = CFrame.new(<span class="number">-2</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">-- 用新的 CFrame 覆盖红色方块的当前 CFrame</span></span><br><span class="line">redBlock.CFrame = newCFrame</span><br></pre></td></tr></table></figure>

<h4 id="通过Vector3给CFrame传值"><a href="#通过Vector3给CFrame传值" class="headerlink" title="通过Vector3给CFrame传值"></a>通过Vector3给CFrame传值</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="comment">-- 创建新 CFrame</span></span><br><span class="line"><span class="keyword">local</span> newVector3 = Vector3.new(<span class="number">-2</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">local</span> newCFrame = CFrame.new(newVector3)</span><br><span class="line"><span class="comment">-- 用新的 CFrame 覆盖红色方块的当前 CFrame</span></span><br><span class="line">redBlock.CFrame = newCFrame</span><br></pre></td></tr></table></figure>

<h3 id="CFrame-Angles"><a href="#CFrame-Angles" class="headerlink" title="CFrame.Angles()"></a>CFrame.Angles()</h3><p>以下是对物体的旋转信息进行操作</p>
<p><code>CFrame.Angles()</code>的形参要求的类型是弧度，但是我们可以通过<code>math.rad()</code>将弧度转换为角度</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock </span><br><span class="line"><span class="comment">-- 创建旋转后的新 CFrame</span></span><br><span class="line"><span class="keyword">local</span> newCFrame = CFrame.Angles(<span class="number">0</span>, <span class="built_in">math</span>.<span class="built_in">rad</span>(<span class="number">45</span>), <span class="number">0</span>)</span><br><span class="line"><span class="comment">-- 用新的 CFrame 覆盖红色方块的当前 CFrame</span></span><br><span class="line">redBlock.CFrame = newCFrame</span><br></pre></td></tr></table></figure>

<h3 id="设置某物体面向指定点"><a href="#设置某物体面向指定点" class="headerlink" title="设置某物体面向指定点"></a>设置某物体面向指定点</h3><p>现在关卡中存在两个Actor，分别是<code>RedBlock</code>，<code>BlueCube</code>，现在我们想让 <code>redBlock</code> 部件定位至 <strong>0</strong>, <strong>3</strong>, <strong>0</strong>，并使其面向 <code>blueCube</code> 部件：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="keyword">local</span> blueCube = game.Workspace.BlueCube</span><br><span class="line"><span class="comment">-- 为初始位置和目标位置各创建一个 Vector3</span></span><br><span class="line"><span class="keyword">local</span> startPosition = Vector3.new(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">local</span> targetPosition = blueCube.Position</span><br><span class="line"><span class="comment">-- 将红色方块放至 &#x27;startPosition&#x27; 并使其前方面向 &#x27;targetPosition&#x27;</span></span><br><span class="line">redBlock.CFrame = CFrame.new(startPosition, targetPosition)</span><br></pre></td></tr></table></figure>

<h3 id="更新Actor位置"><a href="#更新Actor位置" class="headerlink" title="更新Actor位置"></a>更新Actor位置</h3><h4 id="相对自身位移"><a href="#相对自身位移" class="headerlink" title="相对自身位移"></a>相对自身位移</h4><p>有时候我们需要在代码层更新Actor的位置，这时只需对该Actor的<code>CFrame</code>通过<code>Vector3</code>进行增加或减少即可。</p>
<p>此处也就是实现了该Actor相对自己进行位移</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line">redBlock.CFrame = CFrame.new(redBlock.Position) + Vector3.new(<span class="number">0</span>, <span class="number">1.25</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h4 id="相对另一个Actor进行位移"><a href="#相对另一个Actor进行位移" class="headerlink" title="相对另一个Actor进行位移"></a>相对另一个Actor进行位移</h4><p>第一张图是移动前，第二张是移动后</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="keyword">local</span> blueCube = game.Workspace.BlueCube</span><br><span class="line"></span><br><span class="line">redBlock.CFrame = CFrame.new(blueCube.Position) + Vector3.new(<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>                <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Other-Part-Offset-A.png">                <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Other-Part-Offset-B.png"></p>
<p>关键点在于将新增的<code>Vector3</code>添加到哪一个Actor上，如果是自身，则相对自己位移，如果是其他Actor，则是相对其他Actor位移</p>
<h3 id="实现Actor动态朝向"><a href="#实现Actor动态朝向" class="headerlink" title="实现Actor动态朝向"></a>实现Actor动态朝向</h3><p>应用场景举例：</p>
<ul>
<li>在世界中任意位置及任意朝向的玩家面前生成漂浮的宝物。</li>
<li>在玩家的右肩上方生成一个魔法精灵。</li>
</ul>
<h4 id="相对位移"><a href="#相对位移" class="headerlink" title="相对位移"></a>相对位移</h4><p>Roblox处理相对位置和相对旋转很奇怪，不像是虚幻那样，专门有变量为<code>RelativeRotation</code>和<code>RelativeLoctation</code>来处理相对位置与旋转信息</p>
<p>在Roblox里，通过将某Actor的<code>CFrame</code>看作世界坐标，再通过此<code>CFarme</code>进行旋转&#x2F;移动</p>
<p>例如：我想围绕我自己的X轴旋转，那我先把我自己的X轴看作世界坐标，根据这个世界坐标，给自己加减<code>CFrame</code></p>
<p>那么实现“将某<code>CFrame</code>看作世界坐标”的函数是？</p>
<h5 id="CFrame-ToWorldSpace"><a href="#CFrame-ToWorldSpace" class="headerlink" title="CFrame:ToWorldSpace()"></a>CFrame:ToWorldSpace()</h5><p><code>CFrame:ToWorldSpace()</code>：可以将对象的局部朝向 CFrame 转换为新的<strong>全局</strong>朝向。</p>
<p>说人话：将传入的<code>CFrame</code>看作世界坐标</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="keyword">local</span> blueCube = game.Workspace.BlueCube</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> offsetCFrame = CFrame.new(<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line">redBlock.CFrame = blueCube.CFrame:ToWorldSpace(offsetCFrame)</span><br></pre></td></tr></table></figure>

<p>        <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Other-Part-Relative-Position-A.png">        <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Other-Part-Relative-Position-B.png"></p>
<h4 id="相对旋转"><a href="#相对旋转" class="headerlink" title="相对旋转"></a>相对旋转</h4><p>还是使用<code>CFrame：ToWorldSpace()</code></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="keyword">local</span> rotatedCFrame = CFrame.Angles(<span class="number">0</span>, <span class="built_in">math</span>.<span class="built_in">rad</span>(<span class="number">70</span>), <span class="built_in">math</span>.<span class="built_in">rad</span>(<span class="number">20</span>))</span><br><span class="line">redBlock.CFrame = redBlock.CFrame:ToWorldSpace(rotatedCFrame)</span><br></pre></td></tr></table></figure>

<p>        <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Self-Rotate-A.png">        <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Self-Rotate-B.png"></p>
<h3 id="指定表面朝向特定点"><a href="#指定表面朝向特定点" class="headerlink" title="指定表面朝向特定点"></a>指定表面朝向特定点</h3><p>比如，玩家左肩膀上的小精灵的右侧永远朝向玩家的左脸</p>
<p>实现思路</p>
<ol>
<li><p>将小精灵的正前方朝向玩家左脸</p>
</li>
<li><p>将小精灵绕自身旋转一下</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="keyword">local</span> blueCube = game.Workspace.BlueCube</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为目标位置创建一个 Vector3</span></span><br><span class="line"><span class="keyword">local</span> targetPosition = blueCube.Position</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使红色方块的前方面向 &#x27;targetPosition&#x27;</span></span><br><span class="line">redBlock.CFrame = CFrame.new(redBlock.Position, targetPosition)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 以红色方块自身为轴心旋转其 CFrame，使其顶面（而非前面）面向目标</span></span><br><span class="line"><span class="keyword">local</span> rotatedCFrame = CFrame.Angles(<span class="built_in">math</span>.<span class="built_in">rad</span>(<span class="number">-90</span>), <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">redBlock.CFrame = redBlock.CFrame:ToWorldSpace(rotatedCFrame)</span><br></pre></td></tr></table></figure>

<p>        <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Top-Face-Pointing-A.png">        <img src="https://prod.docsiteassets.roblox.com/assets/modeling/cframes/CFrame-Top-Face-Pointing-B.png"></p>
<h3 id="将物体放置在两点之间的特定点"><a href="#将物体放置在两点之间的特定点" class="headerlink" title="将物体放置在两点之间的特定点"></a>将物体放置在两点之间的特定点</h3><p>可以通过名为 <strong>Linear Interpolation</strong>（也就是线性插值，常被简称为 <strong>Lerp</strong>）的方法将 CFrame 定位至两点之间的特定位置。</p>
<p>举例来说，以下代码将会使用值 <code>0.7</code> 将 <code>redBlock</code> 放置在 <code>greenCube</code> 与 <code>cyanCube</code> 部件之间，该值将会使其绿色和红色部件之间的距离为总距离的 70%。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> redBlock = game.Workspace.RedBlock</span><br><span class="line"><span class="keyword">local</span> greenCube = game.Workspace.GreenCube</span><br><span class="line"><span class="keyword">local</span> cyanCube = game.Workspace.CyanCube</span><br><span class="line"></span><br><span class="line">redBlock.CFrame = greenCube.CFrame:Lerp(cyanCube.CFrame, <span class="number">0.7</span>)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">williny</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
